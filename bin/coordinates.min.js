/**
 * almond 0.2.0 Copyright (c) 2011, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/almond for details
 */

var requirejs,require,define;(function(e){function l(e,t){var n,r,i,s,o,a,f,l,c,h,p=t&&t.split("/"),d=u.map,v=d&&d["*"]||{};if(e&&e.charAt(0)==="."&&t){p=p.slice(0,p.length-1),e=p.concat(e.split("/"));for(l=0;l<e.length;l+=1){h=e[l];if(h===".")e.splice(l,1),l-=1;else if(h===".."){if(l===1&&(e[2]===".."||e[0]===".."))break;l>0&&(e.splice(l-1,2),l-=2)}}e=e.join("/")}if((p||v)&&d){n=e.split("/");for(l=n.length;l>0;l-=1){r=n.slice(0,l).join("/");if(p)for(c=p.length;c>0;c-=1){i=d[p.slice(0,c).join("/")];if(i){i=i[r];if(i){s=i,o=l;break}}}if(s)break;!a&&v&&v[r]&&(a=v[r],f=l)}!s&&a&&(s=a,o=f),s&&(n.splice(0,o,s),e=n.join("/"))}return e}function c(t,r){return function(){return n.apply(e,f.call(arguments,0).concat([t,r]))}}function h(e){return function(t){return l(t,e)}}function p(e){return function(t){s[e]=t}}function d(n){if(o.hasOwnProperty(n)){var r=o[n];delete o[n],a[n]=!0,t.apply(e,r)}if(!s.hasOwnProperty(n)&&!a.hasOwnProperty(n))throw new Error("No "+n);return s[n]}function v(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function m(e){return function(){return u&&u.config&&u.config[e]||{}}}var t,n,r,i,s={},o={},u={},a={},f=[].slice;r=function(e,t){var n,r=v(e),i=r[0];return e=r[1],i&&(i=l(i,t),n=d(i)),i?n&&n.normalize?e=n.normalize(e,h(t)):e=l(e,t):(e=l(e,t),r=v(e),i=r[0],e=r[1],i&&(n=d(i))),{f:i?i+"!"+e:e,n:e,pr:i,p:n}},i={require:function(e){return c(e)},exports:function(e){var t=s[e];return typeof t!="undefined"?t:s[e]={}},module:function(e){return{id:e,uri:"",exports:s[e],config:m(e)}}},t=function(t,n,u,f){var l,h,v,m,g,y=[],b;f=f||t;if(typeof u=="function"){n=!n.length&&u.length?["require","exports","module"]:n;for(g=0;g<n.length;g+=1){m=r(n[g],f),h=m.f;if(h==="require")y[g]=i.require(t);else if(h==="exports")y[g]=i.exports(t),b=!0;else if(h==="module")l=y[g]=i.module(t);else if(s.hasOwnProperty(h)||o.hasOwnProperty(h)||a.hasOwnProperty(h))y[g]=d(h);else{if(!m.p)throw new Error(t+" missing "+h);m.p.load(m.n,c(f,!0),p(h),{}),y[g]=s[h]}}v=u.apply(s[t],y);if(t)if(l&&l.exports!==e&&l.exports!==s[t])s[t]=l.exports;else if(v!==e||!b)s[t]=v}else t&&(s[t]=u)},requirejs=require=n=function(s,o,a,f,l){return typeof s=="string"?i[s]?i[s](o):d(r(s,o).f):(s.splice||(u=s,o.splice?(s=o,o=a,a=null):s=e),o=o||function(){},typeof a=="function"&&(a=f,f=l),f?t(e,s,o,a):setTimeout(function(){t(e,s,o,a)},15),n)},n.config=function(e){return u=e,n},define=function(e,t,n){t.splice||(n=t,t=[]),o[e]=[e,t,n]},define.amd={jQuery:!0}})(),define("../vendor/almond",function(){}),define("events/helpers/EventPhase",["require"],function(e){return{CAPTURING_PHASE:0,AT_TARGET:1,BUBBLING_PHASE:2}}),define("events/helpers/Event",["require","./EventPhase"],function(e){var t,n;return n=e("./EventPhase"),t=function(){function e(e,t,r){var i,s=this;this.type=e,this.bubbles=t!=null?t:!1,this.cancelable=r!=null?r:!1,this.type||function(){throw""+this+" type is not defined!"}.call(this),this._isCancelled=!1,this._isCancelledNow=!1,this.target=null,this.currentTarget=null,i=n.AT_TARGET,this.setEventPhase=function(e){return i=e},this.getEventPhase=function(){return i}}return e.prototype.clone=function(){return new e(this.type,this.bubbles,this.cancelable)},e.prototype.stopImmediatePropagation=function(){this._isCancelled=this._isCancelledNow=!0},e.prototype.stopPropagation=function(){this._isCancelled=!0},e.prototype.toString=function(){return"[object Event "+this.type+"]"},e.prototype.createSimilar=function(t,n,r){var i;return i=new e(this.type,this.bubbles,this.cancelable),r&&(i.target=r),i},e}()}),define("events/helpers/IEventDispatcher",["require"],function(e){var t;return t=function(){function e(){}return e.prototype.addEventListener=function(e,t){},e.prototype.dispatchEvent=function(e){},e.prototype.hasEventListener=function(e){},e.prototype.removeEventLisnter=function(e,t){},e.prototype.willTrigger=function(e){},e}()});var __hasProp={}.hasOwnProperty,__extends=function(e,t){function r(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};define("events/helpers/EventDispatcher",["require","./IEventDispatcher","./EventPhase"],function(e){var t,n,r,i,s;return r=e("./IEventDispatcher"),n=e("./EventPhase"),s=1,i=function(){function e(e,t,n){this.mListner=e,this.mUseCapture=t,this.mPriority=n,this.mID=s++}return e.prototype.Is=function(e,t){return this.mListner===e&&this.mUseCapture===t},e.prototype.dispatchEvent=function(e){return this.mListner(e)},e}(),t=function(e){function t(e){this._target=e!=null?e:this,this._eventMap=[]}return __extends(t,e),t.prototype._getList=function(e){return this._eventMap[e]},t.prototype._setList=function(e,t){return this._eventMap[e]=t},t.prototype._existList=function(e){return this._eventMap[e]!=null},t.prototype._compareListeners=function(e,t){return e.mPriority===t.mPriority?0:e.mPriority>t.mPriority?-1:1},t.prototype.addEventListener=function(e,t,n,r,s){var o;n==null&&(n=!1),r==null&&(r=0),s==null&&(s=!1),o=this._getList(e),this._existList(e)||(o=[],this._setList(e,o)),o.push(new i(t,n,r)),o.sort(this._compareListeners)},t.prototype.dispatchEvent=function(e){var t,r,i,s;e.target||(e.target=this._target),t=e.eventPhase===n.CAPTURING_PHASE;if(this._existList(e.type)){i=this._getList(e.type),r=0;while(r<i.length){s=i[r];if(s.mUseCapture===t){s.dispatchEvent(e);if(e._isCancelledNow===!0)return!0}r<i.length&&s!==i[r]||r++}return!0}return!1},t.prototype.hasEventListener=function(e){return this._existList(e)},t.prototype.removeEventListener=function(e,t,n){var r,i,s,o;n==null&&(n=!1);if(!this._existList(e))return;i=this._getList(e);for(r=s=0,o=i.length;0<=o?s<o:s>o;r=0<=o?++s:--s)if(i[r].Is(e,t)){i.splice(r,1);return}},t.prototype.toString=function(){return"[object EventDispatcher]"},t.prototype.willTrigger=function(e){return this.hasEventListener(e)},t}(r)}),define("events/helpers/helpers",["require","./Event","./EventDispatcher","./EventPhase","./IEventDispatcher"],function(e){var t,n,r,i;return t=e("./Event"),n=e("./EventDispatcher"),r=e("./EventPhase"),i=e("./IEventDispatcher"),{Event:t,EventDispatcher:n,EventPhase:r,IEventDispatcher:i}});var __hasProp={}.hasOwnProperty,__extends=function(e,t){function r(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};define("events/CoordinatesNodeEvent",["require","./helpers/Event"],function(e){var t,n;return n=e("./helpers/Event"),t=function(e){function t(e,n,r,i){this.node=n,r==null&&(r=!1),i==null&&(i=!1),t.__super__.constructor.call(this,e,r,i)}return __extends(t,e),t.prototype.ADD="coordyNodeAdd",t.prototype.REMOVE="coordyNodeRemove",t.prototype.clone=function(){return new t(this.type,this.node,this.bubbles,this.cancelable)},t}(n)}),define("events/events",["require","./helpers/helpers","./CoordinatesNodeEvent"],function(e){var t,n;return n=e("./helpers/helpers"),t=e("./CoordinatesNodeEvent"),{helpers:n,CoordinateNodeEvent:t}}),define("nodes/Node",["require"],function(e){var t;return t=function(){function e(e){this.getLink=function(){return e},this.setLink=function(t){return e=t}}return e.prototype.toObject=function(){throw"Method must be called in Node descendant"},e.prototype.toString=function(){return"[object Node]"},e}()});var __hasProp={}.hasOwnProperty,__extends=function(e,t){function r(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};define("nodes/twodee/Node2d",["require","../Node"],function(e){var t,n;return t=e("../Node"),n=function(e){function t(e,n,r,i,s){var o;e==null&&(e=null),n==null&&(n=0),r==null&&(r=0),i==null&&(i=0),s==null&&(s=0),t.__super__.constructor.call(this,e),o=0,this.getX=function(){return n},this.setX=function(e){return n=e},this.getY=function(){return r},this.setY=function(e){return r=e},this.getJitterX=function(){return i},this.setJitterX=function(e){return i=Math.random()*e*((Math.random()>.5!=null)-{1:1})},this.getJitterY=function(){return s},this.setJitterY=function(e){return s=Math.random()*e*((Math.random()>.5!=null)-{1:1})},this.getRotation=function(){return o},this.setRotation=function(e){return o=e},this.setJitterX(i),this.setJitterY(s)}return __extends(t,e),t.prototype.clone=function(){var e;return e=new t(this.getLink(),this.getX(),this.getY(),this.getJitterX(),this.getJitterY),e.setRotation(this.getRotation()),e},t.prototype.toObject=function(){return{x:this.getX(),y:this.getY(),jitterX:this.getJitterX(),jitterY:this.getJitterY(),rotation:this.getRotation()}},t.prototype.toString=function(){return"[object Node2d]"},t}(t)});var __hasProp={}.hasOwnProperty,__extends=function(e,t){function r(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};define("nodes/twodee/OrderedNode",["require","./Node2d"],function(e){var t,n;return t=e("./Node2d"),n=function(e){function t(e,n,r,i,s,o){e==null&&(e=null),n==null&&(n=0),r==null&&(r=0),i==null&&(i=0),s==null&&(s=0),o==null&&(o=0),t.__super__.constructor.call(this,e,r,i,s,o),this.getOrder=function(){return n},this.setOrder=function(e){return n=e}}return __extends(t,e),t.prototype.clone=function(){return new t(this.getLink,this.getOrder(),this.getX(),this.getY,this.getJitterX(),this.getJitterY())},t.prototype.toObject=function(){return{order:this.getOrder(),x:this.getX(),y:this.getY(),rotation:this.getRotation()}},t}(t)}),define("nodes/twodee/twodee",["require","./Node2d","./OrderedNode"],function(e){return{Node2d:e("./Node2d"),OrderedNode:e("./OrderedNode")}}),define("nodes/nodes",["require","./Node","./twodee/twodee"],function(e){return{Node:e("./Node"),twodee:e("./twodee/twodee")}}),define("links/Link",["require"],function(e){var t;return t=function(){function e(e,t,n,r){t==null&&(t=0),n==null&&(n=0),r==null&&(r=0),Object.defineProperties(this,{x:{get:function(){return t},set:function(e){return t=e}},y:{get:function(){return n},set:function(e){return n=e}},rotation:{get:function(){return r},set:function(e){return r=e}},element:{get:function(){return e},set:function(t){return e=t}}})}return e.prototype.toString=function(){return"[object Link]"},e}()});var __hasProp={}.hasOwnProperty,__extends=function(e,t){function r(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};define("links/DOMLink2d",["require","./Link"],function(e){var t,n;return n=e("./Link"),t=function(e){function t(e,t,n,r){t==null&&(t=0),n==null&&(n=0),r==null&&(r=0),e instanceof window.HTMLElement||function(){throw"domElement must be an instance of HTMLElement"}(),typeof Object.defineProperties=="function"&&Object.defineProperties(this,{x:{get:function(){return t},set:function(e){return t=e,this.applyTransform()}},y:{get:function(){return n},set:function(e){return n=e,this.applyTransform()}},rotation:{get:function(){return r},set:function(e){return r=e,this.applyTransform()}},domElement:{get:function(){return e},set:function(t){return e=t}}})}return __extends(t,e),t.prototype.applyTransform=function(){var e,t,n,r,i;e=this.domElement,i=["transform","webkitTransform","mozTransform","oTransform","msTransform"];for(n=0,r=i.length;n<r;n++)t=i[n],e.style[t]="translate("+this.x+"px,"+this.y+"px) rotate("+this.rotation+"deg)"},t.prototype.toString=function(){return"[object DOMLink2d]"},t}(n)}),define("links/links",["require","./Link","./DOMLink2d"],function(e){return{Link:e("./Link"),DOMLink2d:e("./DOMLink2d")}}),define("coordinates",["require","./events/events","./nodes/nodes","./links/links"],function(e){var t;return t={events:e("./events/events"),nodes:e("./nodes/nodes"),links:e("./links/links")},t.DOMLink2d=t.links.DOMLink2d,t.Link=t.links.Link,t.Node=t.nodes.Node,t.Node2d=t.nodes.twodee.Node2d,t})