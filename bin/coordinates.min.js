/**
 * almond 0.2.0 Copyright (c) 2011, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/almond for details
 */

var requirejs,require,define;(function(e){function l(e,t){var n,r,i,s,o,a,f,l,c,h,p=t&&t.split("/"),d=u.map,v=d&&d["*"]||{};if(e&&e.charAt(0)==="."&&t){p=p.slice(0,p.length-1),e=p.concat(e.split("/"));for(l=0;l<e.length;l+=1){h=e[l];if(h===".")e.splice(l,1),l-=1;else if(h===".."){if(l===1&&(e[2]===".."||e[0]===".."))break;l>0&&(e.splice(l-1,2),l-=2)}}e=e.join("/")}if((p||v)&&d){n=e.split("/");for(l=n.length;l>0;l-=1){r=n.slice(0,l).join("/");if(p)for(c=p.length;c>0;c-=1){i=d[p.slice(0,c).join("/")];if(i){i=i[r];if(i){s=i,o=l;break}}}if(s)break;!a&&v&&v[r]&&(a=v[r],f=l)}!s&&a&&(s=a,o=f),s&&(n.splice(0,o,s),e=n.join("/"))}return e}function c(t,r){return function(){return n.apply(e,f.call(arguments,0).concat([t,r]))}}function h(e){return function(t){return l(t,e)}}function p(e){return function(t){s[e]=t}}function d(n){if(o.hasOwnProperty(n)){var r=o[n];delete o[n],a[n]=!0,t.apply(e,r)}if(!s.hasOwnProperty(n)&&!a.hasOwnProperty(n))throw new Error("No "+n);return s[n]}function v(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function m(e){return function(){return u&&u.config&&u.config[e]||{}}}var t,n,r,i,s={},o={},u={},a={},f=[].slice;r=function(e,t){var n,r=v(e),i=r[0];return e=r[1],i&&(i=l(i,t),n=d(i)),i?n&&n.normalize?e=n.normalize(e,h(t)):e=l(e,t):(e=l(e,t),r=v(e),i=r[0],e=r[1],i&&(n=d(i))),{f:i?i+"!"+e:e,n:e,pr:i,p:n}},i={require:function(e){return c(e)},exports:function(e){var t=s[e];return typeof t!="undefined"?t:s[e]={}},module:function(e){return{id:e,uri:"",exports:s[e],config:m(e)}}},t=function(t,n,u,f){var l,h,v,m,g,y=[],b;f=f||t;if(typeof u=="function"){n=!n.length&&u.length?["require","exports","module"]:n;for(g=0;g<n.length;g+=1){m=r(n[g],f),h=m.f;if(h==="require")y[g]=i.require(t);else if(h==="exports")y[g]=i.exports(t),b=!0;else if(h==="module")l=y[g]=i.module(t);else if(s.hasOwnProperty(h)||o.hasOwnProperty(h)||a.hasOwnProperty(h))y[g]=d(h);else{if(!m.p)throw new Error(t+" missing "+h);m.p.load(m.n,c(f,!0),p(h),{}),y[g]=s[h]}}v=u.apply(s[t],y);if(t)if(l&&l.exports!==e&&l.exports!==s[t])s[t]=l.exports;else if(v!==e||!b)s[t]=v}else t&&(s[t]=u)},requirejs=require=n=function(s,o,a,f,l){return typeof s=="string"?i[s]?i[s](o):d(r(s,o).f):(s.splice||(u=s,o.splice?(s=o,o=a,a=null):s=e),o=o||function(){},typeof a=="function"&&(a=f,f=l),f?t(e,s,o,a):setTimeout(function(){t(e,s,o,a)},15),n)},n.config=function(e){return u=e,n},define=function(e,t,n){t.splice||(n=t,t=[]),o[e]=[e,t,n]},define.amd={jQuery:!0}})(),define("../vendor/almond",function(){}),define("events/helpers/EventPhase",["require"],function(e){return{CAPTURING_PHASE:0,AT_TARGET:1,BUBBLING_PHASE:2}}),define("events/helpers/Event",["require","./EventPhase"],function(e){var t,n;return n=e("./EventPhase"),t=function(){function e(e,t,r){var i,s=this;this.type=e,this.bubbles=t!=null?t:!1,this.cancelable=r!=null?r:!1,this.type||function(){throw""+this+" type is not defined!"}.call(this),this._isCancelled=!1,this._isCancelledNow=!1,this.target=null,this.currentTarget=null,i=n.AT_TARGET,this.setEventPhase=function(e){return i=e},this.getEventPhase=function(){return i}}return e.prototype.clone=function(){return new e(this.type,this.bubbles,this.cancelable)},e.prototype.stopImmediatePropagation=function(){this._isCancelled=this._isCancelledNow=!0},e.prototype.stopPropagation=function(){this._isCancelled=!0},e.prototype.toString=function(){return"[object Event "+this.type+"]"},e.prototype.createSimilar=function(t,n,r){var i;return i=new e(this.type,this.bubbles,this.cancelable),r&&(i.target=r),i},e}()});var __hasProp={}.hasOwnProperty;define("utils/BaseClass",["require"],function(e){var t;return t=function(){function e(){}return e.prototype.initConfig=function(e,t){var n,r;e==null&&(e=null),t==null&&(t=null);if(e)for(n in e){if(!__hasProp.call(e,n))continue;r=e[n],this._createGetter(n),this._createSetter(n,r,t)}},e.prototype._createGetter=function(e){var t,n;t="get"+e.capitalize(),(n=this[t])==null&&(this[t]=function(){return this["_"+e]})},e.prototype._createSetter=function(e,t,n){var r,i;n==null&&(n=null),r="set"+e.capitalize(),(i=this[r])==null&&(this[r]=function(t){this["_"+e]=t;if(n&&n instanceof Function)return n.call(this)}),this[r](t)},e}()});var __hasProp={}.hasOwnProperty,__extends=function(e,t){function r(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};define("events/helpers/EventDispatcher",["require","./EventPhase","../../utils/BaseClass"],function(e){var t,n,r,i,s;return r=e("./EventPhase"),t=e("../../utils/BaseClass"),s=1,i=function(){function e(e,t,n){this.mListner=e,this.mUseCapture=t,this.mPriority=n,this.mID=s++}return e.prototype.Is=function(e,t){return this.mListner===e&&this.mUseCapture===t},e.prototype.dispatchEvent=function(e){return this.mListner(e)},e}(),n=function(e){function t(e){this._target=e!=null?e:this,this._eventMap=[]}return __extends(t,e),t.prototype._getList=function(e){return this._eventMap[e]},t.prototype._setList=function(e,t){return this._eventMap[e]=t},t.prototype._existList=function(e){return this._eventMap[e]!=null},t.prototype._compareListeners=function(e,t){return e.mPriority<t.mPriority},t.prototype.addEventListener=function(e,t,n,r,s){var o;n==null&&(n=!1),r==null&&(r=0),s==null&&(s=!1),o=this._getList(e),this._existList(e)||(o=[],this._setList(e,o)),o.push(new i(t,n,r)),o.sort(this._compareListeners)},t.prototype.dispatchEvent=function(e){var t,n,i,s;e.target||(e.target=this._target),t=e.eventPhase===r.CAPTURING_PHASE;if(this._existList(e.type)){i=this._getList(e.type),n=0;while(n<i.length){s=i[n];if(s.mUseCapture===t){s.dispatchEvent(e);if(e._isCancelledNow===!0)return!0}n<i.length&&s!==i[n]||n++}return!0}return!1},t.prototype.hasEventListener=function(e){return this._existList(e)},t.prototype.removeEventListener=function(e,t,n){var r,i,s,o;n==null&&(n=!1);if(!this._existList(e))return;i=this._getList(e);for(r=s=0,o=i.length;0<=o?s<o:s>o;r=0<=o?++s:--s)if(i[r].Is(e,t)){i.splice(r,1);return}},t.prototype.toString=function(){return"[object EventDispatcher]"},t.prototype.willTrigger=function(e){return this.hasEventListener(e)},t}(t)}),define("events/helpers/helpers",["require","./Event","./EventDispatcher","./EventPhase"],function(e){var t,n,r;return t=e("./Event"),n=e("./EventDispatcher"),r=e("./EventPhase"),{Event:t,EventDispatcher:n,EventPhase:r}});var __hasProp={}.hasOwnProperty,__extends=function(e,t){function r(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};define("events/NodeEvent",["require","./helpers/Event"],function(e){var t,n;return t=e("./helpers/Event"),n=function(e){function t(e,n,r,i){this.node=n,r==null&&(r=!1),i==null&&(i=!1),t.__super__.constructor.call(this,e,r,i)}return __extends(t,e),t.prototype.ADD="coordyNodeAdd",t.prototype.REMOVE="coordyNodeRemove",t.prototype.clone=function(){return new t(this.type,this.node,this.bubbles,this.cancelable)},t}(t)}),define("events/events",["require","./helpers/helpers","./NodeEvent"],function(e){return{helpers:e("./helpers/helpers"),NodeEvent:e("./NodeEvent")}});var __hasProp={}.hasOwnProperty,__extends=function(e,t){function r(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};define("nodes/Node",["require","../utils/BaseClass"],function(e){var t,n;return t=e("../utils/BaseClass"),n=function(e){function t(e){this.initConfig({link:e})}return __extends(t,e),t.prototype.toObject=function(){throw"Method must be overriden by child class"},t.prototype.toString=function(){return"[object Node]"},t}(t)});var __hasProp={}.hasOwnProperty,__extends=function(e,t){function r(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};define("nodes/twodee/Node2d",["require","../Node"],function(e){var t,n;return t=e("../Node"),n=function(e){function t(e,n,r,i,s){e==null&&(e=null),n==null&&(n=0),r==null&&(r=0),i==null&&(i=0),s==null&&(s=0),t.__super__.constructor.call(this,e),this.initConfig({rotation:0,x:n,y:r,jitterX:i,jitterY:s})}return __extends(t,e),t.prototype.setJitterX=function(e){return this._jitterX=Math.random()*e*(Math.random()>.5?-1:1)},t.prototype.setJitterY=function(e){return this._jitterY=Math.random()*e*(Math.random()>.5?-1:1)},t.prototype.clone=function(){var e;return e=new t(this.getLink(),this.getX(),this.getY(),this.getJitterX(),this.getJitterY),e.setRotation(this.getRotation()),e},t.prototype.toObject=function(){return{x:this.getX(),y:this.getY(),jitterX:this.getJitterX(),jitterY:this.getJitterY(),rotation:this.getRotation()}},t.prototype.toString=function(){return"[object Node2d]"},t}(t)});var __hasProp={}.hasOwnProperty,__extends=function(e,t){function r(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};define("nodes/twodee/OrderedNode",["require","./Node2d"],function(e){var t,n;return t=e("./Node2d"),n=function(e){function t(e,n,r,i,s,o){e==null&&(e=null),n==null&&(n=0),r==null&&(r=0),i==null&&(i=0),s==null&&(s=0),o==null&&(o=0),t.__super__.constructor.call(this,e,r,i,s,o),this.initConfig({order:n})}return __extends(t,e),t.prototype.clone=function(){return new t(this.getLink,this.getOrder(),this.getX(),this.getY,this.getJitterX(),this.getJitterY())},t.prototype.toObject=function(){return{order:this.getOrder(),x:this.getX(),y:this.getY(),rotation:this.getRotation()}},t.prototype.toString=function(){return"[object OrderedNode]"},t}(t)});var __hasProp={}.hasOwnProperty,__extends=function(e,t){function r(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};define("nodes/twodee/GridNode",["require","./Node2d"],function(e){var t,n;return n=e("./Node2d"),t=function(e){function t(e,n,r,i,s,o,u){e==null&&(e=null),n==null&&(n=-1),r==null&&(r=-1),i==null&&(i=0),s==null&&(s=0),o==null&&(o=0),u==null&&(u=0),t.__super__.constructor.call(this,e,i,s,o,u),this.initConfig({row:r,column:n})}return __extends(t,e),t.prototype.clone=function(){return new t(this._link,this._column,this._row,this._x,this._y,this._jitterX,this._jitterY)},t.prototype.toString=function(){return"[object GridNode]"},t.prototype.toObject=function(){return{row:this._row,column:this._column,x:this._x,y:this._y,jitterX:this._jitterX,jitterY:this._jitterY}},t}(n)});var __hasProp={}.hasOwnProperty,__extends=function(e,t){function r(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};define("nodes/twodee/FlowNode",["require","./Node2d"],function(e){var t,n;return n=e("./Node2d"),t=function(e){function t(e,n,r){n==null&&(n=0),r==null&&(r=0),t.__super__.constructor.call(this,e,n,r),this.initConfig({outsideBounds:!1})}return __extends(t,e),t.prototype.getWidth=function(){return this._link.getWidth()},t.prototype.getHeight=function(){return this._link.getHeight()},t.prototype.clone=function(){var e;return e=new t(this._link,this._x,this._y),e.setOutsideBounds(this._outsideBounds),e},t.prototype.toString=function(){return"[object FlowNode]"},t}(n)}),define("nodes/twodee/twodee",["require","./Node2d","./OrderedNode","./GridNode","./FlowNode"],function(e){return{Node2d:e("./Node2d"),OrderedNode:e("./OrderedNode"),GridNode:e("./GridNode"),FlowNode:e("./FlowNode")}}),define("nodes/nodes",["require","./Node","./twodee/twodee"],function(e){return{Node:e("./Node"),twodee:e("./twodee/twodee")}});var __hasProp={}.hasOwnProperty,__extends=function(e,t){function r(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};define("links/Link",["require","../utils/BaseClass"],function(e){var t,n;return t=e("../utils/BaseClass"),n=function(e){function t(e,t,n,r,i,s){t==null&&(t=0),n==null&&(n=0),r==null&&(r=0),i==null&&(i=1),s==null&&(s=1),this.initConfig({element:e,x:t,y:n,rotation:r,width:i,height:s,order:0}),e.width&&this.setWidth(e.width),e.height&&this.setHeight(e.height)}return __extends(t,e),t.prototype.toString=function(){return"[object Link]"},t}(t)});var __hasProp={}.hasOwnProperty,__extends=function(e,t){function r(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};define("links/DOMLink2d",["require","./Link"],function(e){var t,n;return n=e("./Link"),t=function(e){function t(e,n,r,i){n==null&&(n=0),r==null&&(r=0),i==null&&(i=0),t.__super__.constructor.call(this,e,n,r,i),this.getElement().style.position="absolute",this.setWidth(this.getWidth()),this.setHeight(this.getHeight())}return __extends(t,e),t.prototype.setX=function(e){return this._x=e,this.applyTransform()},t.prototype.setY=function(e){return this._y=e,this.applyTransform()},t.prototype.setRotation=function(e){return this._rotation=e,this.applyTransform()},t.prototype.setOrder=function(e){return this._order=e,this.applyTransform()},t.prototype.getHeight=function(){return this.getElement().offsetHeight},t.prototype.getWidth=function(){return this.getElement().offsetWidth},t.prototype.applyTransform=function(){var e,t,n,r;if(this._element!==void 0&&this._element!==null){this.getElement().style.zIndex=this._order||0,r=["transform","webkitTransform","mozTransform","oTransform","msTransform"];for(t=0,n=r.length;t<n;t++)e=r[t],this.getElement().style[e]="translate("+parseInt(this._x)+"px,"+parseInt(this._y)+"px) rotate("+parseInt(this._rotation)+"deg)"}},t.prototype.toString=function(){return"[object DOMLink2d]"},t}(n)}),define("links/links",["require","./Link","./DOMLink2d"],function(e){return{Link:e("./Link"),DOMLink2d:e("./DOMLink2d")}}),define("constants/LayoutUpdateMethod",["require"],function(e){return{NONE:"none",UPDATE_ONLY:"updateOnly",UPDATE_AND_RENDER:"updateAndRender"}});var __hasProp={}.hasOwnProperty,__extends=function(e,t){function r(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};define("layouts/Layout",["require","../events/helpers/EventDispatcher","../events/NodeEvent","../constants/LayoutUpdateMethod"],function(e){var t,n,r,i;return t=e("../events/helpers/EventDispatcher"),i=e("../events/NodeEvent"),r=e("../constants/LayoutUpdateMethod"),n=function(e){function t(){t.__super__.constructor.call(this),this.size=0,this.nodes=[]}return __extends(t,e),t.prototype.addToLayout=function(e,t){throw"Method must be overriden by child class"},t.prototype.addNode=function(e,t){throw"Method must be overriden by child class"},t.prototype.addNodes=function(e){var t,n,i;for(n=0,i=e.length;n<i;n++)t=e[n],this.addNode(t,this._updateMethod===r.UPDATE_AND_RENDER?!0:!1)},t.prototype.toString=function(){return"[object Layout]"},t.prototype.toJSON=function(){var e,t,n,r;for(e=n=0,r=this.size;0<=r?n<r:n>r;e=0<=r?++n:--n)t=this.nodes[e].toObject();return{type:this.toString(),size:this.size,nodes:t}},t.prototype.getNodeByLink=function(e){var t,n,r,i;i=this.nodes;for(n=0,r=i.length;n<r;n++){t=i[n];if(t.getLink()===e)return t}return null},t.prototype.getNodeIndex=function(e){return this.nodes.indexOf(e)},t.prototype.getNodeAt=function(e){return this.nodes[e]},t.prototype.linkExists=function(e){var t,n,r,i;i=this.nodes;for(n=0,r=i.length;n<r;n++){t=i[n];if(e===t.getLink())return!0}return!1},t.prototype.swapNodeLinks=function(e,t){var n;n=e.getLink(),e.setLink(t.getLink()),t.setLink(n)},t.prototype.removeLinks=function(){var e,t,n,r;r=this.nodes;for(t=0,n=r.length;t<n;t++)e=r[t],e.setLink(null)},t.prototype.removeLinkAt=function(e){return this.nodes[e].setLink(null)},t.prototype.removeNode=function(e){var t;return t=this.nodes.splice(this.getNodeIndex(e),1)[0],this.dispatchEvent(new i(i.prototype.REMOVE,t)),--this.size},t.prototype.removeAllNodes=function(){return this.nodes=[],this.size=0},t.prototype.removeNodeByLink=function(e){var t,n,r,i;i=this.nodes;for(n=0,r=i.length;n<r;n++){t=i[n];if(t.getLink()===e){this.removeNode(t);return}}},t.prototype.addLinkAt=function(e,t){return this.nodes[t].setLink(e)},t.prototype.storeNode=function(e){return this.nodes||(this.nodes=[]),this.nodes.push(e),++this.size},t.prototype.storeNodeAt=function(e,t){return this.nodes||(this.nodes=[]),this.nodes.splice(t,0,e),++this.size},t.prototype.getNextAvailableNode=function(){var e,t,n,r;r=this.nodes;for(t=0,n=r.length;t<n;t++){e=r[t];if(e.getLink()!==null)return e}},t}(t)});var __hasProp={}.hasOwnProperty,__extends=function(e,t){function r(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};define("layouts/twodee/Layout2d",["require","../Layout","../../constants/LayoutUpdateMethod","../../nodes/twodee/Node2d","../../events/NodeEvent"],function(e){var t,n,r,i,s;return t=e("../Layout"),r=e("../../constants/LayoutUpdateMethod"),i=e("../../nodes/twodee/Node2d"),s=e("../../events/NodeEvent"),n=function(e){function n(e,t,i,s,o,u,a){e==null&&(e=0),t==null&&(t=0),i==null&&(i=0),s==null&&(s=0),o==null&&(o=0),u==null&&(u=0),a==null&&(a=0),n.__super__.constructor.call(this),this.setUpdateMethod(r.UPDATE_AND_RENDER),this.initConfig({x:e,y:t,width:o,height:u,rotation:a,jitterX:i,jitterY:s},function(){return this.updateFunction()})}var t;return __extends(n,e),n.prototype.getUpdateMethod=function(){return this._updateMethod},n.prototype.setUpdateMethod=function(e){this._updateMethod=e;switch(e){case r.NONE:return this.updateFunction=function(){};case r.UPDATE_ONLY:return this.updateFunction=this.update;default:return this.updateFunction=this.updateAndRender}},n.prototype.getProxyUpdater=function(){return this._proxyUpdater},t=function(e){return this.setUpdateMethod(e.name),this.updateFunction=e.update,this._proxyUpdater=e},n.prototype.addNode=function(e,t){var n;t==null&&(t=!0);if(!this.linkExists(e))return n=new i(e,0,0,this._getRand(),this._getRand()),this.storeNode(n),this.update(),t&&this.render(),this.dispatchEvent(new s(s.prototype.ADD,n)),n},n.prototype.addToLayout=function(e,t){throw"Method must be overriden by child class"},n.prototype.removeNode=function(e){n.__super__.removeNode.apply(this,arguments).removeNode(e),this.updateFunction(),this.dispatchEvent(new CoordyNodeEvent(CoordyNodeEvent.prototype.REMOVE,e))},n.prototype.executeUpdateMethod=function(){return this.updateFunction()},n.prototype.update=function(){},n.prototype.render=function(){var e,t,n,r;r=this.nodes;for(t=0,n=r.length;t<n;t++)e=r[t],e.getLink()!==null&&this.renderNode(e)},n.prototype.updateAndRender=function(){return this.update(),this.render()},n.prototype.clone=function(){throw"Method must be overriden by child class"},n.prototype.renderNode=function(e){return e.getLink().setX(e.getX()),e.getLink().setY(e.getY())},n.prototype.validateObject=function(e){return!0},n.prototype.toString=function(){return"[object Layout2d]"},n.prototype._getRand=function(){return(Math.random()>.5?1:-1)*Math.random()},n}(t)});var __hasProp={}.hasOwnProperty,__extends=function(e,t){function r(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};define("layouts/twodee/VerticalLine",["require","./Layout2d","../../nodes/twodee/OrderedNode","../../events/NodeEvent"],function(e){var t,n,r,i;return t=e("./Layout2d"),r=e("../../nodes/twodee/OrderedNode"),n=e("../../events/NodeEvent"),i=function(e){function t(e,n,r,i,s){e==null&&(e=0),n==null&&(n=0),r==null&&(r=0),i==null&&(i=0),s==null&&(s=0),t.__super__.constructor.call(this,n,r,i,s),this.initConfig({vPadding:e,order:null},function(){return this.updateFunction})}return __extends(t,e),t.prototype.toString=function(){return"[layout VerticalLine]"},t.prototype.addNode=function(e,t){var i;e==null&&(e=null),t==null&&(t=!0);if(this.linkExists(e))return;return i=new r(e,this.size),this.storeNode(i),this.update(),t&&this.render(),this.dispatchEvent(new n(n.prototype.ADD,i)),i},t.prototype.clone=function(){return new t(this.getVPadding(),this.getX(),this.getY(),this.getJitterX(),this.getJitterY())},t.prototype.update=function(){var e,t,n,r,i,s;if(this.size!==0){this.nodes.sort(this.sortOnOrder),t=0,i=this.nodes,s=[];for(n=0,r=i.length;n<r;n++)e=i[n],e.setY(t+this.getY()+e.getJitterY()*this.getJitterY()),e.setX(this.getX()+e.getJitterX()*this.getJitterX()),e.getLink()!==null?s.push(t+=e.getLink().getHeight()+this.getVPadding()):s.push(void 0);return s}},t.prototype.cleanOrder=function(){var e,t,n,r,i;i=this.nodes;for(e=n=0,r=i.length;n<r;e=++n)t=i[e],t.setOrder(e)},t.prototype.sortOnOrder=function(e,t){return e.getOrder()>t.getOrder()},t.prototype.renderNode=function(e){return t.__super__.renderNode.call(this,e),e.getLink().setRotation(0)},t}(t)});var __hasProp={}.hasOwnProperty,__extends=function(e,t){function r(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};define("layouts/twodee/HorizontalLine",["require","./Layout2d","../../events/NodeEvent","../../nodes/twodee/OrderedNode"],function(e){var t,n,r,i;return n=e("./Layout2d"),r=e("../../events/NodeEvent"),i=e("../../nodes/twodee/OrderedNode"),t=function(e){function t(e,n,r,i,s){e==null&&(e=0),n==null&&(n=0),r==null&&(r=0),i==null&&(i=0),s==null&&(s=0),t.__super__.constructor.call(this,n,r,i,s),this.initConfig({hPadding:e},function(){return this.updateFunction()})}return __extends(t,e),t.prototype.toString=function(){return"[object HorizontalLine]"},t.prototype.addNode=function(e,t){var n;e==null&&(e=null),t==null&&(t=!0);if(this.linkExists(e))return;return n=new i(e,this.size),this.storeNode(n),this.cleanOrder(),this.update(),t&&e&&this.render(),this.dispatchEvent(new r(r.prototype.ADD,n)),n},t.prototype.addToLayoutAt=function(e,t,n){var s;n==null&&(n=!0);if(this.linkExists(e))return;return this.nodes||(this.nodes=[]),s=new i(e,t,0,0),this.storeNodeAt(s,t),this.cleanOrder(),this.update(),n&&render(),this.dispatchEvent(new r(r.prototype.ADD,s)),s},t.prototype.renderNode=function(e){return t.__super__.renderNode.call(this,e),e.getLink().setRotation(0)},t.prototype.clone=function(){return new t(this.getHPadding(),this.getX(),this.getY(),this.getJitterX(),this.getJitterY())},t.prototype.update=function(){var e,t,n,r,i,s;if(!(this.size<=0)){this.nodes.sort(function(e,t){return e.getOrder()>t.getOrder()}),t=0,i=this.nodes,s=[];for(n=0,r=i.length;n<r;n++)e=i[n],e.setX(t+this.getX()+e.getJitterX()*this.getJitterX()),e.setY(this.getY()),s.push(t+=e.getLink().getWidth()+this.getHPadding());return s}},t.prototype.cleanOrder=function(){var e,t,n,r;this.nodes.sort(function(e,t){return e.getOrder()>t.getOrder()}),r=[];for(e=t=0,n=this.size;0<=n?t<n:t>n;e=0<=n?++t:--t)r.push(this.nodes[e].setOrder(e));return r},t}(n)});var __hasProp={}.hasOwnProperty,__extends=function(e,t){function r(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};define("nodes/twodee/EllipseNode",["require","./Node2d"],function(e){var t,n;return n=e("./Node2d"),t=function(e){function t(e,n,r,i,s,o){e==null&&(e=null),n==null&&(n=0),r==null&&(r=0),i==null&&(i=0),s==null&&(s=0),o==null&&(o=0),this.initConfig({rotation:i}),t.__super__.constructor.call(this,e,n,r,s,o)}return __extends(t,e),t.prototype.clone=function(){return new t(this.getLink(),this.getX(),this.getY(),this.getRotation(),this.getJitterX(),this.getJitterY())},t}(n)}),define("constants/PathAlignType",{ALIGN_PARALLEL:"alignParallel",ALIGN_PERPENDICULAR:"alignPerpendicular",NONE:"noAlign"});var __hasProp={}.hasOwnProperty,__extends=function(e,t){function r(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};define("layouts/twodee/Ellipse",["require","./Layout2d","../../nodes/twodee/EllipseNode","../../events/NodeEvent","../../constants/PathAlignType"],function(e){var t,n,r,i,s;return r=e("./Layout2d"),t=e("../../nodes/twodee/EllipseNode"),i=e("../../events/NodeEvent"),s=e("../../constants/PathAlignType"),n=function(e){function n(e,t,r,i,o,u,a,f,l){r==null&&(r=0),i==null&&(i=0),o==null&&(o=0),u==null&&(u=0),a==null&&(a=0),f==null&&(f=s.NONE),l==null&&(l=0),n.__super__.constructor.call(this,r,i,u,a,e,t,o),this.initConfig({alignType:f,alignAngleOffset:l},function(){return this.updateFunction()})}return __extends(n,e),n.prototype.toString=function(){return"[object Ellipse]"},n.prototype.addNode=function(e,n){var r;n==null&&(n=!0);if(this.linkExists(e))return;return r=new t(e,0,0,0,0,0),this.storeNode(r),this.update(),n&&this.render(),this.dispatchEvent(new i(i.prototype.ADD,r)),r},n.prototype.renderNode=function(e){return n.__super__.renderNode.call(this,e),e.getLink().setRotation(this.getAlignType()===s.NONE?0:e.getRotation())},n.prototype.clone=function(){return new n(this.getWidth(),this.getHeight(),this.getX(),this.getY(),this.getRotation(),this.getJitterX(),this.getJitterY(),this.getAlignType(),this.getAlignAngleOffset())},n.prototype.update=function(){var e,t,n,r,i,o,u,a,f,l,c;if(!(this.nodes.length<=0)){e=Math.PI,u=this.getWidth()/2,t=this.getHeight()/2,i=this.getRotation()*(e/180),l=this.nodes,c=[];for(n=a=0,f=l.length;a<f;n=++a)r=l[n],o=e*n/(this.size/2)+i,r.setX(u*Math.cos(o)+(u+this.getX())+r.getJitterX()*this.getJitterX()-u),r.setY(t*Math.sin(o)+(t+this.getY())+r.getJitterY()*this.getJitterY()-t),r.setRotation(Math.atan2(this.getY()-r.getY(),this.getX()-r.getX())*(180/e)),this.getAlignType()===s.ALIGN_PERPENDICULAR&&r.setRotation(r.getRotation()+90),c.push(r.setRotation(r.getRotation()+this.getAlignAngleOffset()));return c}},n}(r)}),define("constants/WaveFunction",{SINE:"sineFunction",COSINE:"cosineFunction",TAN:"tanFunction",ARCSINE:"arcsineFunction",ARCCOSINE:"arccosineFunction",ARCTAN:"arctanFunction"});var __hasProp={}.hasOwnProperty,__extends=function(e,t){function r(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};define("layouts/twodee/Wave",["require","../../events/NodeEvent","../../constants/PathAlignType","../../constants/WaveFunction","./Layout2d"],function(e){var t,n,r,i,s;return n=e("../../events/NodeEvent"),r=e("../../constants/PathAlignType"),s=e("../../constants/WaveFunction"),t=e("./Layout2d"),i=function(e){function n(e,t,i,o,u,a,f,l,c,h){i==null&&(i=0),o==null&&(o=0),u==null&&(u=1),a==null&&(a=s.SINE),f==null&&(f=0),l==null&&(l=0),c==null&&(c=r.ALIGN_PERPENDICULAR),h==null&&(h=0),n.__super__.constructor.call(this,i,o,f,l,e,t),this.initConfig({frequency:u,waveFunction:a,alignType:c,alignOffset:h},function(){return this.updateFunction()}),this._heightMultiplier=0,this._thetaOffset=0}var t;return __extends(n,e),t=Math.PI,n.prototype.setWaveFunction=function(e){this._wavefunction=e||s.SINE;switch(this._wavefunction){case s.SINE:return this._function=Math.sin;case s.COSINE:return this._function=Math.cos;case s.TAN:return this._function=Math.tan;case s.ARCSINE:return this._function=Math.asin;case s.ARCOSINE:return this._function=Math.acos;case s.ARCTAN:return this._function=Math.atan;default:return this._function=Math.sin}},n.prototype.getWaveFunction=function(){return this._wavefunction},n.prototype.getAlignType=function(){return this._alignType},n.prototype.getAlignOffset=function(){return this._alignOffset},n.prototype.toString=function(){return"[object Wave]"},n.prototype.clone=function(){return new n(this.getWidth(),this.getHeight(),this.getX(),this.getY(),this.getFrequency(),this.getWaveFunction(),this.getJitterX(),this.getJitterY(),this.getAlignType(),this.getAlignOffset())},n.prototype.render=function(){var e,t,n,r,i;r=this.nodes,i=[];for(t=0,n=r.length;t<n;t++)e=r[t],e.getLink()!==null?i.push(this.renderNode(e)):i.push(void 0);return i},n.prototype.renderNode=function(e){return n.__super__.renderNode.call(this,e),e.getLink().setRotation(this.getAlignType()===r.NONE?0:e.getRotation())},n.prototype.update=function(){var e,n,i,s,o,u,a,f;i=this.nodes.length;if(!(i<=0)){a=this.nodes,f=[];for(e=o=0,u=a.length;o<u;e=++o)s=a[e],s.setX(e*(this.getWidth()/i)+this.getX()+s.getJitterX()*this.getJitterX()),n=this._y+s._jitterY*this._jitterY,s.setY(this._function(t*(e+1)/(i/2)*this._frequency-this._thetaOffset*t/180)*((this._height+this._heightMultiplier*e)/2)+n),this._function===Math.sin?s.setRotation(Math.cos(t*(e+1)/(i/2)*this._frequency)*180/t):this._function===Math.cos?s.setRotation(Math.sin(t*(e+1)/(i/2)*this.frequency)*180/t):s.setRotation(0),this._alignType===r.ALIGN_PERPENDICULAR&&s.setRotation(s.getRotation()+90),f.push(s.setRotation(s.getRotation()+this._alignOffset));return f}},n}(t)}),define("constants/StackOrder",{ASCENDING:"stackAscending",DESCENDING:"stackDescending"});var __hasProp={}.hasOwnProperty,__extends=function(e,t){function r(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};define("layouts/twodee/Stack",["require","./Layout2d","../../constants/StackOrder","../../nodes/twodee/OrderedNode","../../events/NodeEvent"],function(e){var t,n,r,i,s;return t=e("./Layout2d"),s=e("../../constants/StackOrder"),r=e("../../nodes/twodee/OrderedNode"),n=e("../../events/NodeEvent"),i=function(e){function t(e,n,r,i,o,u,a){e==null&&(e=45),n==null&&(n=5),r==null&&(r=0),i==null&&(i=0),o==null&&(o=s.ASCENDING),u==null&&(u=0),a==null&&(a=0),t.__super__.constructor.call(this,r,i,u,a),this.initConfig({angle:e,offset:n,order:o},function(){return this.updateFunction})}return __extends(t,e),t.prototype.toString=function(){return"[object Stack]"},t.prototype.addNode=function(e,t){var i;t==null&&(t=!0);if(this.linkExists(e))return;return i=new r(e,this.nodes.length-1),this.storeNode(i),this.cleanOrder(),this.update(),t&&this.render(),this.dispatchEvent(new n(n.prototype.ADD,i)),i},t.prototype.clone=function(){return new t(this._angle,this._offset,this._x,this._y,this._order,this._jitterX,this._jitterY)},t.prototype.renderNode=function(e){t.__super__.renderNode.call(this,e),e.getLink().setOrder(e.getOrder()),e.getLink().setRotation(0)},t.prototype.update=function(){var e,t,n,r,i;if(!(this.nodes.length<=0)){this.cleanOrder(),n=this._angle*Math.PI/180,this._order===s.ASCENDING?this.nodes.sort(function(e,t){return e.getOrder()-t.getOrder()}):this.nodes.sort(function(e,t){return t.getOrder()-e.getOrder()});for(e=r=0,i=this.nodes.length;0<=i?r<i:r>i;e=0<=i?++r:--r)t=this.nodes[e],t.setX(this._x+Math.cos(n)*this._offset*e+t.getJitterX()*this._jitterX),t.setY(this._y+Math.sin(n)*this._offset*e+t.getJitterY()*this._jitterY)}},t.prototype.cleanOrder=function(){var e,t,n,r,i;i=this.nodes;for(e=n=0,r=i.length;n<r;e=++n)t=i[e],this.nodes[e].setOrder(e)},t}(t)});var __hasProp={}.hasOwnProperty,__extends=function(e,t){function r(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};define("layouts/twodee/Spiral",["require","./Layout2d","../../constants/PathAlignType","../../events/NodeEvent"],function(e){var t,n,r,i;return t=e("./Layout2d"),r=e("../../constants/PathAlignType"),n=e("../../events/NodeEvent"),i=function(e){function n(e,t,i,s,o,u,a,f,l,c){t==null&&(t=0),i==null&&(i=0),s==null&&(s=.15),o==null&&(o=30),u==null&&(u=0),a==null&&(a=0),f==null&&(f=0),l==null&&(l=r.NONE),c==null&&(c=0),n.__super__.constructor.call(this,t,i,a,f),this.initConfig({circumference:e,spiralConstant:s,alignType:l,alignOffset:c,angleDelta:o},function(){return this.userFunction})}var t;return __extends(n,e),t=Math.PI,n.prototype.toString=function(){return"[object Spiral]"},n.prototype.renderNode=function(e){return n.__super__.renderNode.call(this,e),e.getLink().setRotation(this._alignType===r.NONE?0:e.getRotation())},n.prototype.clone=function(){return new n(this._circumference,this._spiralConstant,this._x,this._y,this._angleDelta,this._rotation,this._jitterX,this._jitterY,this._alignType,this._alignOffset)},n.prototype.update=function(){var e,n,i,s,o,u;if(!(this.nodes.length<=0)){u=this.nodes;for(e=s=0,o=u.length;s<o;e=++s)n=u[e],i=this._angleDelta*e*t/180,n.setX(this._x+this._circumference*Math.exp(this._spiralConstant*i)*Math.cos(i)),n.setY(this._y+this._circumference*Math.exp(this._spiralConstant*i)*Math.sin(i)),n.setRotation(Math.atan2(this._y-n.getY(),this._x-n.getX())*(180/t)),this._alignType===r.ALIGN_PERPENDICULAR&&n.setRotation(n.getRotation()+90),n.setRotation(n.getRotation()+this._alignOffset)}},n}(t)}),define("constants/GridLayoutDirection",{LEFT_TO_RIGHT:"leftToRight",RIGHT_TO_LEFT:"rightToLeft",TOP_TO_BOTTOM:"upToDown",BOTTOM_TO_TOP:"downToUp"});var __hasProp={}.hasOwnProperty,__extends=function(e,t){function r(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};define("layouts/twodee/Grid",["require","./Layout2d","../../constants/GridLayoutDirection","../../events/NodeEvent","../../nodes/twodee/GridNode"],function(e){var t,n,r,i,s;return i=e("./Layout2d"),n=e("../../constants/GridLayoutDirection"),s=e("../../events/NodeEvent"),r=e("../../nodes/twodee/GridNode"),t=function(e){function t(e,r,i,s,o,u,a,f,l,c,h,p){i==null&&(i=0),s==null&&(s=0),a==null&&(a=0),f==null&&(f=0),l==null&&(l=n.LEFT_TO_RIGHT),c==null&&(c=n.TOP_TO_BOTTOM),h==null&&(h=0),p==null&&(p=0),t.__super__.constructor.call(this,i,s,h,p,e,r),this.initConfig({columns:o,rows:u,hPadding:a,vPadding:f,hDirection:l,vDirection:c},function(){return this.updateFunction})}return __extends(t,e),t.prototype.setColumns=function(e){return this._columns=e,this._maxNodes=this._columns*this._rows,this.updateFunction()},t.prototype.setRows=function(e){return this._rows=e,this._maxNodes=this._columns*this._rows,this.updateFunction()},t.prototype.addNode=function(e,t){var n,i,o,u;t==null&&(t=!0);if(this.linkExists(e)||this.size>this._maxNodes)return;return i=this.calculateCellSize(),n=this.size%this._columns,u=Math.floor(this.size/(this._maxNodes/this._rows)),o=new r(e,n,u,i.width*n+n*this._hPadding+this._x,i.height*u+u*this._vPadding+this._y),this.storeNode(o),t&&(e.setX(o.getX()),e.setY(o.getY())),this.dispatchEvent(new s(s.prototype.ADD,o)),o},t.prototype.toString=function(){return"[object Grid]"},t.prototype.getColumn=function(e){var t,n,r,i,s,o;s=this.nodes,o=[];for(t=r=0,i=s.length;r<i;t=++r)n=s[t],o.push(this.nodes[t*this._columns+e]);return o},t.prototype.getRow=function(e){var t,n,r,i,s;s=[];for(t=n=r=e*this._columns,i=e*this._columns+this._columns;r<=i?n<i:n>i;t=r<=i?++n:--n)s.push(this.nodes[t]);return s},t.prototype.renderNode=function(e){return t.__super__.renderNode.call(this,e),e.getLink().setRotation(0)},t.prototype.update=function(){var e,t,r,i,s,o,u,a,f;if(!(this.nodes.length<=0)){o=this._columns*this._rows,t=this.calculateCellSize(),f=this.nodes;for(r=u=0,a=f.length;u<a;r=++u){i=f[r];if(!i)break;e=r%this._columns,s=Math.floor(r/(o/this._rows)),this._hDirection===n.RIGHT_TO_LEFT&&(e=this._columns-1-e),this._vDirection===n.BOTTOM_TO_TOP&&(s=(this._rows-1)(-s)),i.setX(t.width*e+e*this._hPadding+this._x),i.setY(t.height*s+s*this._vPadding+this._y),i.setRotation(0)}}},t.prototype.calculateCellSize=function(){return{x:0,y:0,width:(this._width-(this._columns-1)*this._hPadding)/this._columns,height:(this._height-(this._rows-1)*this._vPadding)/this._rows}},t}(i)});var __hasProp={}.hasOwnProperty,__extends=function(e,t){function r(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};define("nodes/twodee/ScatterNode",["require","./Node2d"],function(e){var t,n;return t=e("./Node2d"),n=function(e){function t(e,n,r,i){t.__super__.constructor.call(this,e,n,r),this.initConfig({rotation:i,xRelation:null,yRelation:null})}return __extends(t,e),t.prototype.toString=function(){return"[object ScatterNode]"},t.prototype.clone=function(){var e;return e=new t(this._link,this._x,this._y,this._rotation),e.setXRelation(this._xRelation),e.setYRelation(this._yRelation),e},t}(t)});var __hasProp={}.hasOwnProperty,__extends=function(e,t){function r(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};define("layouts/twodee/Scatter",["require","../../events/NodeEvent","../../nodes/twodee/ScatterNode","./Layout2d"],function(e){var t,n,r,i;return n=e("../../events/NodeEvent"),i=e("../../nodes/twodee/ScatterNode"),t=e("./Layout2d"),r=function(e){function t(e,n,r,i,s,o){r==null&&(r=0),i==null&&(i=0),s==null&&(s=1),o==null&&(o=!1),t.__super__.constructor.call(this,r,i,0,0,e,n),this.initConfig({jitter:s,jitterRotation:o},function(){return this.updateFunction})}return __extends(t,e),t.prototype.toString=function(){return"[object Scatter]"},t.prototype.addNode=function(e,t){var r,s,o,u;return this.linkExists(e)?null:(s=Math.round(Math.random())?-1:1,o=this._width/2+Math.random()*this._width*this._jitter/2*s+this._x,s=Math.round(Math.random())?-1:1,u=this._height/2+Math.random()*this._height*this._jitter/2*s+this._y,s=Math.round(Math.random())?-1:1,r=new i(e,o,u,this._jitterRotation?Math.random()*s*360:0),r.setXRelation(r.getX()/this._width),r.setYRelation(r.getY()/this._height),this.storeNode(r),t&&this.render(),this.dispatchEvent(new n(n.prototype.ADD,r)),r)},t.prototype.update=function(){var e,t,n,r,i,s;if(!(((r=this.nodes)!=null?r.length:void 0)<=0)){i=this.nodes,s=[];for(t=0,n=i.length;t<n;t++)e=i[t],e.setX(e.getXRelation()*this._width),s.push(e.setY(e.getYRelation()*this._height));return s}},t.prototype.scatter=function(){var e,t,n,r,i,s;if(((i=this.nodes)!=null?i.length:void 0)<=0)return;s=this.nodes;for(n=0,r=s.length;n<r;n++)e=s[n],t=Math.round(Math.random())?-1:1,e.setX(this._width/2+Math.random()*this._width*this._jitter/2*t+this._x),t=Math.round(Math.random())?-1:1,e.setY(this._height/2+Math.random()*this._height*this._jitter/2*t+this._y),e.setXRelation(e.getX()/this._width),e.setYRelation(e.getY()/this._height);this.updateFunction()},t.prototype.renderNode=function(e){return e.getLink().setX(e.getX()),e.getLink().setY(e.getY()),e.getLink().setRotation(e.getRotation()),e},t.prototype.clone=function(){return new t(this._width,this._x,this._y,this._jitter,this._jitterRotation)},t}(t)}),define("constants/FlowOverflowPolicy",[],function(){return{ALLOW_OVERFLOW:"allow",IGNORE_OVERFLOW:"ignore",HIDE_OVERFLOW:"hide"}}),define("constants/FlowAlignment",[],function(){return{TOP_LEFT:"tl",TOP_CENTER:"tc",TOP_RIGHT:"tr",MIDDLE_LEFT:"ml",MIDDLE_CENTER:"mc",MIDDLE_RIGHT:"mr",BOTTOM_LEFT:"bl",BOTTOM_CENTER:"bc",BOTTOM_RIGHT:"br"}}),define("constants/FlowDirection",[],function(){return{HORIZONTAL:"flowHorizontal",VERTICAL:"flowVertical"}});var __hasProp={}.hasOwnProperty,__extends=function(e,t){function r(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};define("layouts/twodee/Flow",["require","./Layout2d","../../events/NodeEvent","../../nodes/twodee/FlowNode","../../constants/FlowOverflowPolicy","../../constants/FlowAlignment","../../constants/FlowDirection"],function(e){var t,n,r,i,s,o,u;return o=e("./Layout2d"),u=e("../../events/NodeEvent"),i=e("../../nodes/twodee/FlowNode"),s=e("../../constants/FlowOverflowPolicy"),n=e("../../constants/FlowAlignment"),r=e("../../constants/FlowDirection"),t=function(e){function t(e,i,o,u,a,f){o==null&&(o=0),u==null&&(u=0),a==null&&(a=0),f==null&&(f=0),t.__super__.constructor.call(this,o,u,0,0,e,i),this.initConfig({horizontalAlign:"left",verticalAlign:"top",width:e,height:i,hPadding:a,vPadding:f,overFlowPolicy:s.ALLOW_OVERFLOW,alignment:n.TOP_LEFT,placementDirection:r.HORIZONTAL},function(){return this.updateFunction()})}return __extends(t,e),t.prototype.setOverflowPolicy=function(e){this._overflowPolicy=e;if(this.size>0)return this.updateFunction()},t.prototype.setAlignment=function(e){switch(e){case n.TOP_CENTER:this._verticalAlign="top",this._horizontalAlign="center";break;case n.TOP_RIGHT:this._verticalAlign="top",this._horizontalAlign="right";break;case n.MIDDLE_LEFT:this._verticalAlign="middle",this._horizontalAlign="left";break;case n.MIDLLE_CENTER:this._verticalAlign="middle",this._horizontalAlign="center";break;case n.MIDDLE_RIGHT:this._verticalAlign="middle",this._horizontalAlign="right";break;case n.BOTTOM_LEFT:this._verticalAlign="bottom",this._horizontalAlign="left";break;case n.BOTTOM_CENTER:this._verticalAlign="bottom",this._horizontalAlign="center";break;case n.BOTTOM_RIGHT:this._verticalAlign="bottom",this._horizontalAlign="right";break;default:this._verticalAlign="top",this._horizontalAlign="left"}return this._alignment=e,this.updateFunction()},t.prototype.setWidth=function(e){if(e<=0)throw"width cannot be null";this._width=e,this.updateFunction()},t.prototype.setHeight=function(e){if(e<=0)throw"height cannot be null";this._height=e,this.updateFunction()},t.prototype.addNode=function(e,t){var n;return e==null&&(e=null),t==null&&(t=!0),this.linkExists(e)?null:(n=new i(e),this.storeNode(n),this.update(),t&&this.render(),this.dispatchEvent(new u(u.prototype.ADD,n)),n)},t.prototype.clone=function(){return new t(this._width,this._height,this._x,this._y,this._hPadding,this._vPadding)},t.prototype.update=function(){if(this.nodes.length<=0)return;return this._placementDirection===r.HORIZONTAL?this.LayoutChildrenHorizontally({x:this._x,y:this._y,width:this._width,height:this._height}):this.layoutChildrenVertically({x:this._x,y:this._y,width:this._width,height:this._height})},t.prototype.renderNode=function(e){return t.__super__.renderNode.call(this,e),e.getLink().setRotation(0)},t.prototype.LayoutChildrenHorizontally=function(e){var t,n,r,i,s,o,u,a,f,l,c,h,p;t=e.x,l=e.y,f=t,o=0,a=[],p=this.nodes;for(i=c=0,h=p.length;c<h;i=++c){u=p[i];if(!u.getLink())continue;s=u.getLink(),n={x:s.getX(),y:s.getY(),width:s.getWidth(),height:s.getHeight()},n.x*=s.getWidth()/n.width,n.y*=s.getHeight()/n.height,r=f+s.getWidth()+0,r-e.x>e.width&&f!==t&&(this.alignRow(a,o,e),l+=o+this._vPadding,f=t,o=0,a=[]),u.setOutsideBounds(l+s.getHeight()>e.height?!0:!1),u.setX(f),u.setY(l),a.push(u),o=Math.max(o,s.getHeight()),f+=s.getWidth()+this._hPadding}this.alignRow(a,o,e)},t.prototype.layoutChildrenVertically=function(e){var t,n,r,i,s,o,u,a,f,l,c,h,p;t=e.y+0,f=e.x+0,l=t,u=0,r=[],p=this.nodes;for(s=c=0,h=p.length;c<h;s=++c){a=p[s];if(!a.getLink())continue;o=a.getLink(),n={x:o.getX(),y:o.getY(),width:o.getWidth(),height:o.getHeight()},n.x*=o.getWidth()/n.width,n.y*=o.getHeight()/n.height,i=l+o.getHeight()+0,i-e.y>=e.height&&l!==t&&(this.alignColumn(r,u,e),f+=u+this._hPadding,l=t,r=[]),a.setOutsideBounds=f+o.getWidth()>e.width?!0:!1,a.setX(f),a.setY(l),r.push(a),u=Math.max(u,o.getWidth()),l+=o.getHeight()+this._vPadding}this.alignColumn(r,u,e)},t.prototype.alignColumn=function(e,t,n){var r,i,s,o,u,a,f,l;if(e.length<=0)return;a=e[e.length-1],s=a.getY()+a.getLink().getHeight()-n.y,o=n.height-s,i=e.length;for(u=f=0,l=e.length;0<=l?f<l:f>l;u=0<=l?++f:--f){r=e[u],this.alignItems(r,{x:r.getX(),y:r.getY(),width:t,height:r.getLink().getHeight()},this._horizontalAlign,null);switch(this._verticalAlign){case"middle":r.setY(r.getY()+o/2);break;case"bottom":r.setY(r.getY()+o)}}},t.prototype.alignRow=function(e,t,n){var r,i,s,o,u,a,f;if(e.length===0)return;s=e[e.length-1],u=s.getX()+s.getLink().getWidth()-n.x+0,r=n.width-u;for(i=a=0,f=e.length;a<f;i=++a){o=e[i],this.alignItems(o,{x:o.getX(),y:o.getY(),width:o.getLink().getWidth(),maxChildHeight:t},null,this._verticalAlign);switch(this.getHorizontalAlign()){case"center":o.setX(o.getX()+r/2);break;case"right":o.setX(o.getX()+r)}}},t.prototype.alignItems=function(e,t,n,r){var i,s;i=t.width-e.getLink().getWidth();switch(n){case"left":e.setX(t.x);break;case"center":e.setX(t.x+i/2);break;case"right":e.setX(t.x+i)}s=t.height-e.getLink().getHeight();switch(r){case"top":e.setY(t.y);break;case"middle":e.setY(t.y+s/2);break;case"bottom":e.setY(t.y+s)}},t.prototype.toString=function(){return"[object Flow]"},t}(o)}),define("constants/LatticeOrder",{ORDER_HORIZONTALLY:"latticeOrderHorizontally",ORDER_VERTICALLY:"latticeOrderVertically"}),define("constants/LatticeType",{SQUARE:"squareLattice",DIAGONAL:"diagonalLattice"}),define("constants/LatticeAlternationPattern",{ALTERNATE_HORIZONTALLY:"diagonalLatticeAlternalHorizontally",ALTERNATE_VERTICALLY:"diagonalLatticeAlternalVertially"});var __hasProp={}.hasOwnProperty,__extends=function(e,t){function r(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};define("layouts/twodee/Lattice",["require","./Layout2d","../../events/NodeEvent","../../constants/LatticeOrder","../../constants/LatticeType","../../constants/LatticeAlternationPattern","../../nodes/twodee/GridNode"],function(e){var t,n,r,i,s,o,u;return o=e("./Layout2d"),u=e("../../events/NodeEvent"),i=e("../../constants/LatticeOrder"),s=e("../../constants/LatticeType"),r=e("../../constants/LatticeAlternationPattern"),t=e("../../nodes/twodee/GridNode"),n=function(e){function n(e,t,o,u,a,f,l,c,h,p,d,v){o==null&&(o=0),u==null&&(u=0),a==null&&(a=1),f==null&&(f=1),l==null&&(l=!0),c==null&&(c=i.ORDER_HORIZONTALLY),h==null&&(h=0),p==null&&(p=0),d==null&&(d=0),v==null&&(v=0),n.__super__.constructor.call(this,o,u,d,v),this.initConfig({hPadding:h,vPadding:p,columns:a,rows:f,maxCells:a*f,allowOverFlow:l,order:c,latticeType:s.DIAGONAL,alternate:r.ALTERNATE_HORIZONTALLY,width:e,height:t},function(){return this.updateFunction})}return __extends(n,e),n.prototype.getWidth=function(){return this._columnWidth*this._columns},n.prototype.setWidth=function(e){return this._width=e,this._columnWidth=e/this._columns,this.updateFunction()},n.prototype.getHeight=function(){return this._rowHeight*this._rows},n.prototype.setHeight=function(e){return this._height=e,this._rowHeight=e/this._rows,this.updateFunction()},n.prototype.setColumns=function(e){if(e===0)throw"columns cannot be equal to 0";this._columns=e,this._order=i.ORDER_HORIZONTALLY,this.updateFunction(),this._maxCells=this._columns*this._rows},n.prototype.setRows=function(e){if(e===0)throw"rows cannot be equal to 0";this._rows=e,this._order=i.ORDER_VERTICALLY,this.updateFunction(),this._maxCells=this._columns*this._rows},n.prototype.toString=function(){return"[object Lattice]"},n.prototype.addNode=function(e,n){var r,s,o;n==null&&(n=!0);if(this.linkExists(e))return;if(!this._allowOverFlow&&this.size>=this._maxCells)return;return r=this._order===i.ORDER_VERTICALLY?this.size%this._columns:this.size%Math.floor(this.size/this._rows),o=this._order===i.ORDER_VERTICALLY?Math.floor(this.size/this._columns):this.size%this._rows,s=new t(e,r,o),this.storeNode(s),this.adjustLattice(),this.update(),n&&this.render(),this._order===i.ORDER_VERTICALLY?this._columns=Math.ceil(this.size/this._rows):this._order===i.ORDER_VERTICALLY&&(this._rows=Math.ceil(this.size/this._columns)),this.dispatchEvent(new u(u.prototype.ADD,s)),s},n.prototype.renderNode=function(e){n.__super__.renderNode.call(this,e),e.getLink().setRotation(0)},n.prototype.update=function(){var e,t,n,i,o;if(this.size<=0)return;o=this.nodes;for(e=n=0,i=o.length;n<i;e=++n)t=o[e],t.setX(t.getColumn()*(this._columnWidth+this._hPadding)+this._x+t.getJitterX()*this._jitterX),t.setY(t.getRow()*(this._rowHeight+this._vPadding)+this._y+t.getJitterY()*this._jitterY),this._latticeType===s.DIAGONAL&&this._alternate===r.ALTERNATE_VERTICALLY&&t.getRow()%2?t.setX(t.getX()+this._columnWidth/2):this._latticeType===s.DIAGONAL&&this._alternate===r.ALTERNATE_HORIZONTALLY&&t.getColumn()%2&&t.setY(t.getY()+this._rowHeight/2)},n.prototype.removeNode=function(e){return n.__super__.removeNode.call(this,e),this.adjustLattice(),this.updateFunction()},n.prototype.clone=function(){return new n(this._width,this._height,this._x,this._y,this._columns,this._rows,this._allowOverFlow,this._order,this._hPadding,this._vPadding,this._jitterX,this._jitterY)},n.prototype.adjustLattice=function(){var e,t,n,r,s,o,u,a,f,l;if(this._order===i.ORDER_HORIZONTALLY){f=this.nodes;for(t=s=0,u=f.length;s<u;t=++s)n=f[t],e=t%this._columns,r=Math.floor(t/this._columns),n.setColumn(e),n.setRow(r)}else{l=this.nodes;for(t=o=0,a=l.length;o<a;t=++o)n=l[t],e=Math.floor(t/this._rows),r=t%this._rows,n.setColumn(e),n.setRow(r)}if(this._order===i.ORDER_VERTICALLY)this._columns=Math.ceil(this.size/this._rows);else if(this._order=i.ORDER_HORIZONTALLY)this._rows=Math.ceil(this.size/this._columns)},n}(o)});var __hasProp={}.hasOwnProperty,__extends=function(e,t){function r(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};define("layouts/twodee/Quadric",["require","./Layout2d","../../events/NodeEvent","../../constants/PathAlignType"],function(e){var t,n,r,i;return t=e("./Layout2d"),n=e("../../events/NodeEvent"),r=e("../../constants/PathAlignType"),i=function(e){function t(e,n,r,i,s,o,u,a,f,l,c,h){c==null&&(c=0),h==null&&(h=0),t.__super__.constructor.call(this,e,n,c,h),this.initConfig({x1:r,y1:i,x2:s,y2:o,x3:u,y3:a,x4:f,y4:l},function(){return this.updateFunction()})}return __extends(t,e),t.prototype.update=function(){var e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v;if(this.nodes.length<=0)return;n=0,r=this._x1,i=this._x2,s=this._x3,o=this._x4,a=this._y1,f=this._y2,l=this._y3,c=this._y4,v=this.nodes;for(e=p=0,d=v.length;p<d;e=++p)t=v[e],u=Math.pow(1-n,3)*r+3*n*Math.pow(1-n,2)*i+3*Math.pow(n,2)*(1-n)*s+Math.pow(n,3)*o,h=Math.pow(1-n,3)*a+3*n*Math.pow(1-n,2)*f+3*Math.pow(n,2)*(1-n)*l+Math.pow(n,3)*c,t.setX(this._x+u+t.getJitterX()*this._jitterX),t.setY(this._y+h+t.getJitterY()*this._jitterY),n+=1/this.nodes.length},t}(t)}),define("layouts/layouts",["require","./Layout","./twodee/Layout2d","./twodee/VerticalLine","./twodee/HorizontalLine","./twodee/Ellipse","./twodee/Wave","./twodee/Stack","./twodee/Spiral","./twodee/Grid","./twodee/Scatter","./twodee/Flow","./twodee/Lattice","./twodee/Quadric"],function(e){return{Layout:e("./Layout"),twodee:{Layout2d:e("./twodee/Layout2d"),VerticalLine:e("./twodee/VerticalLine"),HorizontalLine:e("./twodee/HorizontalLine"),Ellipse:e("./twodee/Ellipse"),Wave:e("./twodee/Wave"),Stack:e("./twodee/Stack"),Spiral:e("./twodee/Spiral"),Grid:e("./twodee/Grid"),Scatter:e("./twodee/Scatter"),Flow:e("./twodee/Flow"),Lattice:e("./twodee/Lattice"),Quadric:e("./twodee/Quadric")}}}),define("helpers/helpers",["require"],function(e){}),define("utils/ES5shims",["require"],function(e){var t,n,r,i,s,o,u;(s=(n=Array.prototype).indexOf)==null&&(n.indexOf=function(e){var t,n,r,i;for(t=r=0,i=this.length;r<i;t=++r){n=this[t];if(n===e)return t}return-1}),(o=(r=Array.prototype).isArray)==null&&(r.isArray=function(){return Array.prototype.constructor===this.constructor&&typeof this.length=="number"}),(u=(i=String.prototype).capitalize)==null&&(i.capitalize=function(){var e,t,n,r;return r=this.valueOf().split(" "),e=function(){var e,i,s;s=[];for(e=0,i=r.length;e<i;e++)n=r[e],t=n.slice(0,1),t=t.toUpperCase(),s.push(t+n.slice(1));return s}(),e.join(" ")});if(typeof t===void 0&&t===null)return t={log:function(){}}});var __hasProp={}.hasOwnProperty,__extends=function(e,t){function r(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};define("utils/LayoutTransitioner",["require","./BaseClass"],function(e){var t,n;return t=e("./BaseClass"),n=function(e){function t(e,t){this.initConfig({tweenFunction:e,layout:t})}return __extends(t,e),t.prototype.syncNodesTo=function(e){var t,n,r,i,s;e==null&&(e=null),e&&this.setLayout(e);if(this.getTweenFunction()===null)return this.getLayout().updateAndRender();i=this.getLayout().nodes,s=[];for(n=0,r=i.length;n<r;n++)t=i[n],s.push(this.getTweenFunction()(t));return s},t}(t)}),define("utils/utils",["require","./ES5shims","./BaseClass","./LayoutTransitioner"],function(e){return{ES5shims:e("./ES5shims"),BaseClass:e("./BaseClass"),LayoutTransitioner:e("./LayoutTransitioner")}}),define("constants/LayoutType",{ELLIPSE_3D:"Ellipse3d",GRID_3D:"Grid3d",SCATTER_3D:"Scatter3d",SNAPSHOT_3D:"Snapshot3d",SPHEROID_3D:"Sphere3d",STACK_3D:"Stack3d",WAVE_3D:"Wave3d",WAVE_ELLIPSE_3D:"WaveEllipse3d",ELLIPSE:"Ellipse",SPIRAL:"Spiral",FLOW:"Flow",GRID:"Grid",HORIZONTAL_LINE:"HorizontalLine",LATTICE:"Lattice",SCATTER:"Scatter",SNAPSHOT:"Snapshot",STACK:"Stack",VERTICAL_LINE:"VerticalLine",WAVE:"Wave",QUADRIC:"Quadric"}),define("constants/constants",["require","./LayoutUpdateMethod","./PathAlignType","./WaveFunction","./StackOrder","./GridLayoutDirection","./FlowOverflowPolicy","./FlowDirection","./FlowAlignment","./LatticeType","./LatticeType","./LatticeAlternationPattern","./LayoutType"],function(e){return{LayoutUpdateMethod:e("./LayoutUpdateMethod"),PathAlignType:e("./PathAlignType"),WaveFunction:e("./WaveFunction"),StackOrder:e("./StackOrder"),GridLayoutDirection:e("./GridLayoutDirection"),FlowOverflowPolicy:e("./FlowOverflowPolicy"),FlowDirection:e("./FlowDirection"),FlowAlignment:e("./FlowAlignment"),LatticeType:e("./LatticeType"),LatticeOrder:e("./LatticeType"),LatticeAlternationPattern:e("./LatticeAlternationPattern"),LayoutType:e("./LayoutType")}}),define("Coordinates",["require","./events/events","./nodes/nodes","./links/links","./layouts/layouts","./helpers/helpers","./utils/utils","./constants/constants"],function(e){var t;return t={events:e("./events/events"),nodes:e("./nodes/nodes"),links:e("./links/links"),layouts:e("./layouts/layouts"),helpers:e("./helpers/helpers"),utils:e("./utils/utils"),constants:e("./constants/constants")},t.DOMLink2d=t.links.DOMLink2d,t.Link=t.links.Link,t.Node=t.nodes.Node,t.Node2d=t.nodes.twodee.Node2d,t.Layout=t.layouts.Layout,t.Layout2d=t.layouts.twodee.Layout2d,t.VerticalLine=t.layouts.twodee.VerticalLine,t.HorizontalLine=t.layouts.twodee.HorizontalLine,t.Ellipse=t.layouts.twodee.Ellipse,t.BaseClass=t.utils.BaseClass,t.NodeEvent=t.events.NodeEvent,t.Wave=t.layouts.twodee.Wave,t.Stack=t.layouts.twodee.Stack,t.Spiral=t.layouts.twodee.Spiral,t.Flow=t.layouts.twodee.Flow,t.Grid=t.layouts.twodee.Grid,t.Scatter=t.layouts.twodee.Scatter,t.Lattice=t.layouts.twodee.Lattice,t.Quadric=t.layouts.twodee.Quadric,t.LayoutTransitioner=t.utils.LayoutTransitioner,t.LayoutUpdateMethod=t.constants.LayoutUpdateMethod,t.FlowOverflowPolicy=t.constants.FlowOverflowPolicy,t.FlowDirection=t.constants.FlowDirection,t.FlowAlignment=t.constants.FlowAlignment,t.StackOrder=t.constants.StackOrder,t.LatticeAlternationPattern=t.constants.LatticeAlternationPattern,t.LatticeOrder=t.constants.LatticeOrder,t.LatticeType=t.constants.LatticeType,t.LayoutType=t.constants.LayoutType,t.createDom2dLinks=function(e){var n,r,i,s;s=[];for(r=0,i=e.length;r<i;r++)n=e[r],s.push(new t.DOMLink2d(n));return s},t.addLinksTolayout=function(e,t){return t.addNodes(e)},t.createDomLinks=function(e){var n,r,i;for(r=0,i=e.length;r<i;r++)return n=e[r],new t.DOMLink2d(n)},t.createLayout=function(e,n,r){var i;return e=e.capitalize(),i=function(){var r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A,O,M,_,D,P,H,B,j;switch(e){case t.LayoutType.ELLIPSE:return k=n.width,d=n.height,L=n.x,D=n.y,E=n.rotation,g=n.jitterX,y=n.jitterY,s=n.alignType,r=n.alignAngleOffset,new t.Ellipse(k,d,L,D,E,g,y);case t.LayoutType.SPIRAL:return f=n.circumference,L=n.x,D=n.y,x=n.spiralConstant,a=n.angleDelta,E=n.rotation,g=n.jitterX,y=n.jitterY,s=n.alignType,i=n.alignOffset,new t.Spiral(f,L,D,x,a,E,g,y,s,i);case t.LayoutType.FLOW:return k=n.width,d=n.height,L=n.x,D=n.y,p=n.hPadding,N=n.vPadding,new t.Flow(k,d,L,D,p,N);case t.LayoutType.GRID:return k=n.width,d=n.height,L=n.x,D=n.y,l=n.columns,S=n.rows,p=n.hPadding,N=n.vPadding,h=n.hDirection,T=n.vDirection,g=n.jitterX,y=n.jitterY,new t.Grid(k,d,L,D,l,S,p,N,h,T,g,y);case t.LayoutType.HORIZONTAL_LINE:return p=n.hPadding,L=n.x,D=n.y,g=n.jitterX,y=n.jitterY,new t.HorizontalLine(p,L,D,g,y);case t.LayoutType.LATTICE:return k=n.width,d=n.height,L=n.x,D=n.y,l=n.columns,S=n.rows,o=n.allowOverFlow,w=n.order,p=n.hPadding,N=n.vPadding,g=n.jitterX,y=n.jitterY,new t.Lattice(k,d,L,D,l,S,o,w,p,N,g,y);case t.LayoutType.SCATTER:return k=n.width,d=n.height,L=n.x,D=n.y,v=n.jitter,m=n.jitterRotation,new t.Scatter(k,d,L,D,v,m);case t.LayoutType.QUADRIC:return L=n.x,D=n.y,A=n.x1,P=n.y1,O=n.x2,H=n.y2,M=n.x3,B=n.y3,_=n.x4,j=n.y4,g=n.jitterX,y=n.jitterY,new t.Quadric(L,D,A,P,O,H,M,B,_,j,g,y);case t.LayoutType.STACK:return u=n.angle,b=n.offset,L=n.x,D=n.y,w=n.order,g=n.jitterX,y=n.jitterY,new t.Stack(u,b,L,D,w,g,y);case t.LayoutType.VERTICAL_LINE:return N=n.vPadding,L=n.x,D=n.y,g=n.jitterX,y=n.jitterY,new t.VerticalLine(N,L,D,g,y);case t.LayoutType.WAVE:return k=n.width,d=n.height,L=n.x,D=n.y,c=n.frequency,C=n.waveFunction,g=n.jitterX,y=n.jitterY,s=n.alignType,i=n.alignOffset,new t.Wave(k,d,L,D,c,C,g,y,s,i)}}(),r&&i.addNodes(r),i},t.createDomLayout=function(e,n,r,i){var s;return i==null&&(i=!1),s=t.createLayout(e,n)},t})