/**
 * almond 0.2.0 Copyright (c) 2011, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/almond for details
 */

var requirejs,require,define;(function(e){function l(e,t){var n,r,i,s,o,a,f,l,c,h,p=t&&t.split("/"),d=u.map,v=d&&d["*"]||{};if(e&&e.charAt(0)==="."&&t){p=p.slice(0,p.length-1),e=p.concat(e.split("/"));for(l=0;l<e.length;l+=1){h=e[l];if(h===".")e.splice(l,1),l-=1;else if(h===".."){if(l===1&&(e[2]===".."||e[0]===".."))break;l>0&&(e.splice(l-1,2),l-=2)}}e=e.join("/")}if((p||v)&&d){n=e.split("/");for(l=n.length;l>0;l-=1){r=n.slice(0,l).join("/");if(p)for(c=p.length;c>0;c-=1){i=d[p.slice(0,c).join("/")];if(i){i=i[r];if(i){s=i,o=l;break}}}if(s)break;!a&&v&&v[r]&&(a=v[r],f=l)}!s&&a&&(s=a,o=f),s&&(n.splice(0,o,s),e=n.join("/"))}return e}function c(t,r){return function(){return n.apply(e,f.call(arguments,0).concat([t,r]))}}function h(e){return function(t){return l(t,e)}}function p(e){return function(t){s[e]=t}}function d(n){if(o.hasOwnProperty(n)){var r=o[n];delete o[n],a[n]=!0,t.apply(e,r)}if(!s.hasOwnProperty(n)&&!a.hasOwnProperty(n))throw new Error("No "+n);return s[n]}function v(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function m(e){return function(){return u&&u.config&&u.config[e]||{}}}var t,n,r,i,s={},o={},u={},a={},f=[].slice;r=function(e,t){var n,r=v(e),i=r[0];return e=r[1],i&&(i=l(i,t),n=d(i)),i?n&&n.normalize?e=n.normalize(e,h(t)):e=l(e,t):(e=l(e,t),r=v(e),i=r[0],e=r[1],i&&(n=d(i))),{f:i?i+"!"+e:e,n:e,pr:i,p:n}},i={require:function(e){return c(e)},exports:function(e){var t=s[e];return typeof t!="undefined"?t:s[e]={}},module:function(e){return{id:e,uri:"",exports:s[e],config:m(e)}}},t=function(t,n,u,f){var l,h,v,m,g,y=[],b;f=f||t;if(typeof u=="function"){n=!n.length&&u.length?["require","exports","module"]:n;for(g=0;g<n.length;g+=1){m=r(n[g],f),h=m.f;if(h==="require")y[g]=i.require(t);else if(h==="exports")y[g]=i.exports(t),b=!0;else if(h==="module")l=y[g]=i.module(t);else if(s.hasOwnProperty(h)||o.hasOwnProperty(h)||a.hasOwnProperty(h))y[g]=d(h);else{if(!m.p)throw new Error(t+" missing "+h);m.p.load(m.n,c(f,!0),p(h),{}),y[g]=s[h]}}v=u.apply(s[t],y);if(t)if(l&&l.exports!==e&&l.exports!==s[t])s[t]=l.exports;else if(v!==e||!b)s[t]=v}else t&&(s[t]=u)},requirejs=require=n=function(s,o,a,f,l){return typeof s=="string"?i[s]?i[s](o):d(r(s,o).f):(s.splice||(u=s,o.splice?(s=o,o=a,a=null):s=e),o=o||function(){},typeof a=="function"&&(a=f,f=l),f?t(e,s,o,a):setTimeout(function(){t(e,s,o,a)},15),n)},n.config=function(e){return u=e,n},define=function(e,t,n){t.splice||(n=t,t=[]),o[e]=[e,t,n]},define.amd={jQuery:!0}})(),define("../vendor/almond",function(){}),define("events/helpers/EventPhase",["require"],function(e){return{CAPTURING_PHASE:0,AT_TARGET:1,BUBBLING_PHASE:2}}),define("events/helpers/Event",["require","./EventPhase"],function(e){var t,n;return n=e("./EventPhase"),t=function(){function e(e,t,r){var i,s=this;this.type=e,this.bubbles=t!=null?t:!1,this.cancelable=r!=null?r:!1,this.type||function(){throw""+this+" type is not defined!"}.call(this),this._isCancelled=!1,this._isCancelledNow=!1,this.target=null,this.currentTarget=null,i=n.AT_TARGET,this.setEventPhase=function(e){return i=e},this.getEventPhase=function(){return i}}return e.prototype.clone=function(){return new e(this.type,this.bubbles,this.cancelable)},e.prototype.stopImmediatePropagation=function(){this._isCancelled=this._isCancelledNow=!0},e.prototype.stopPropagation=function(){this._isCancelled=!0},e.prototype.toString=function(){return"[object Event "+this.type+"]"},e.prototype.createSimilar=function(t,n,r){var i;return i=new e(this.type,this.bubbles,this.cancelable),r&&(i.target=r),i},e}()});var __hasProp={}.hasOwnProperty;define("utils/BaseClass",["require"],function(e){var t;return t=function(){function e(){}return e.prototype.initConfig=function(e,t){var n,r;e==null&&(e=null),t==null&&(t=null);if(e)for(n in e){if(!__hasProp.call(e,n))continue;r=e[n],this._createGetter(n),this._createSetter(n,r,t)}},e.prototype._createGetter=function(e){var t,n;t="get"+e.capitalize(),(n=this[t])==null&&(this[t]=function(){return this["_"+e]})},e.prototype._createSetter=function(e,t,n){var r,i;n==null&&(n=null),r="set"+e.capitalize(),(i=this[r])==null&&(this[r]=function(t){this["_"+e]=t;if(n&&n instanceof Function)return n.call(this)}),this[r](t)},e}()});var __hasProp={}.hasOwnProperty,__extends=function(e,t){function r(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};define("events/helpers/EventDispatcher",["require","./EventPhase","../../utils/BaseClass"],function(e){var t,n,r,i,s;return r=e("./EventPhase"),t=e("../../utils/BaseClass"),s=1,i=function(){function e(e,t,n){this.mListner=e,this.mUseCapture=t,this.mPriority=n,this.mID=s++}return e.prototype.Is=function(e,t){return this.mListner===e&&this.mUseCapture===t},e.prototype.dispatchEvent=function(e){return this.mListner(e)},e}(),n=function(e){function t(e){this._target=e!=null?e:this,this._eventMap=[]}return __extends(t,e),t.prototype._getList=function(e){return this._eventMap[e]},t.prototype._setList=function(e,t){return this._eventMap[e]=t},t.prototype._existList=function(e){return this._eventMap[e]!=null},t.prototype._compareListeners=function(e,t){return e.mPriority<t.mPriority},t.prototype.addEventListener=function(e,t,n,r,s){var o;n==null&&(n=!1),r==null&&(r=0),s==null&&(s=!1),o=this._getList(e),this._existList(e)||(o=[],this._setList(e,o)),o.push(new i(t,n,r)),o.sort(this._compareListeners)},t.prototype.dispatchEvent=function(e){var t,n,i,s;e.target||(e.target=this._target),t=e.eventPhase===r.CAPTURING_PHASE;if(this._existList(e.type)){i=this._getList(e.type),n=0;while(n<i.length){s=i[n];if(s.mUseCapture===t){s.dispatchEvent(e);if(e._isCancelledNow===!0)return!0}n<i.length&&s!==i[n]||n++}return!0}return!1},t.prototype.hasEventListener=function(e){return this._existList(e)},t.prototype.removeEventListener=function(e,t,n){var r,i,s,o;n==null&&(n=!1);if(!this._existList(e))return;i=this._getList(e);for(r=s=0,o=i.length;0<=o?s<o:s>o;r=0<=o?++s:--s)if(i[r].Is(e,t)){i.splice(r,1);return}},t.prototype.toString=function(){return"[object EventDispatcher]"},t.prototype.willTrigger=function(e){return this.hasEventListener(e)},t}(t)}),define("events/helpers/helpers",["require","./Event","./EventDispatcher","./EventPhase"],function(e){var t,n,r;return t=e("./Event"),n=e("./EventDispatcher"),r=e("./EventPhase"),{Event:t,EventDispatcher:n,EventPhase:r}});var __hasProp={}.hasOwnProperty,__extends=function(e,t){function r(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};define("events/NodeEvent",["require","./helpers/Event"],function(e){var t,n;return t=e("./helpers/Event"),n=function(e){function t(e,n,r,i){this.node=n,r==null&&(r=!1),i==null&&(i=!1),t.__super__.constructor.call(this,e,r,i)}return __extends(t,e),t.prototype.ADD="coordyNodeAdd",t.prototype.REMOVE="coordyNodeRemove",t.prototype.clone=function(){return new t(this.type,this.node,this.bubbles,this.cancelable)},t}(t)}),define("events/events",["require","./helpers/helpers","./NodeEvent"],function(e){return{helpers:e("./helpers/helpers"),NodeEvent:e("./NodeEvent")}});var __hasProp={}.hasOwnProperty,__extends=function(e,t){function r(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};define("nodes/Node",["require","../utils/BaseClass"],function(e){var t,n;return t=e("../utils/BaseClass"),n=function(e){function t(e){this.initConfig({link:e})}return __extends(t,e),t.prototype.toObject=function(){throw"Method must be overriden by child class"},t.prototype.toString=function(){return"[object Node]"},t}(t)});var __hasProp={}.hasOwnProperty,__extends=function(e,t){function r(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};define("nodes/twodee/Node2d",["require","../Node"],function(e){var t,n;return t=e("../Node"),n=function(e){function t(e,n,r,i,s){e==null&&(e=null),n==null&&(n=0),r==null&&(r=0),i==null&&(i=0),s==null&&(s=0),t.__super__.constructor.call(this,e),this.initConfig({rotation:0,x:n,y:r,jitterX:i,jitterY:s})}return __extends(t,e),t.prototype.setJitterX=function(e){return this._jitterX=Math.random()*e*(Math.random()>.5?-1:1)},t.prototype.setJitterY=function(e){return this._jitterY=Math.random()*e*(Math.random()>.5?-1:1)},t.prototype.clone=function(){var e;return e=new t(this.getLink(),this.getX(),this.getY(),this.getJitterX(),this.getJitterY),e.setRotation(this.getRotation()),e},t.prototype.toObject=function(){return{x:this.getX(),y:this.getY(),jitterX:this.getJitterX(),jitterY:this.getJitterY(),rotation:this.getRotation()}},t.prototype.toString=function(){return"[object Node2d]"},t}(t)});var __hasProp={}.hasOwnProperty,__extends=function(e,t){function r(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};define("nodes/twodee/OrderedNode",["require","./Node2d"],function(e){var t,n;return t=e("./Node2d"),n=function(e){function t(e,n,r,i,s,o){e==null&&(e=null),n==null&&(n=0),r==null&&(r=0),i==null&&(i=0),s==null&&(s=0),o==null&&(o=0),t.__super__.constructor.call(this,e,r,i,s,o),this.initConfig({order:n})}return __extends(t,e),t.prototype.clone=function(){return new t(this.getLink,this.getOrder(),this.getX(),this.getY,this.getJitterX(),this.getJitterY())},t.prototype.toObject=function(){return{order:this.getOrder(),x:this.getX(),y:this.getY(),rotation:this.getRotation()}},t.prototype.toString=function(){return"[object OrderedNode]"},t}(t)});var __hasProp={}.hasOwnProperty,__extends=function(e,t){function r(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};define("nodes/twodee/GridNode",["require","./Node2d"],function(e){var t,n;return n=e("./Node2d"),t=function(e){function t(e,n,r,i,s,o,u){e==null&&(e=null),n==null&&(n=-1),r==null&&(r=-1),i==null&&(i=0),s==null&&(s=0),o==null&&(o=0),u==null&&(u=0),t.__super__.constructor.call(this,e,i,s,o,u),this.initConfig({row:r,column:n})}return __extends(t,e),t.prototype.clone=function(){return new t(this._link,this._column,this._row,this._x,this._y,this._jitterX,this._jitterY)},t.prototype.toString=function(){return"[object GridNode]"},t.prototype.toObject=function(){return{row:this._row,column:this._column,x:this._x,y:this._y,jitterX:this._jitterX,jitterY:this._jitterY}},t}(n)}),define("nodes/twodee/twodee",["require","./Node2d","./OrderedNode","./GridNode"],function(e){return{Node2d:e("./Node2d"),OrderedNode:e("./OrderedNode"),GridNode:e("./GridNode")}}),define("nodes/nodes",["require","./Node","./twodee/twodee"],function(e){return{Node:e("./Node"),twodee:e("./twodee/twodee")}});var __hasProp={}.hasOwnProperty,__extends=function(e,t){function r(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};define("links/Link",["require","../utils/BaseClass"],function(e){var t,n;return t=e("../utils/BaseClass"),n=function(e){function t(e,t,n,r,i,s){t==null&&(t=0),n==null&&(n=0),r==null&&(r=0),i==null&&(i=0),s==null&&(s=0),this.initConfig({element:e,x:t,y:n,rotation:r,width:i,height:s,order:0})}return __extends(t,e),t.prototype.toString=function(){return"[object Link]"},t}(t)});var __hasProp={}.hasOwnProperty,__extends=function(e,t){function r(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};define("links/DOMLink2d",["require","./Link"],function(e){var t,n;return n=e("./Link"),t=function(e){function t(e,n,r,i){n==null&&(n=0),r==null&&(r=0),i==null&&(i=0),t.__super__.constructor.call(this,e,n,r,i),this.getElement().style.position="absolute"}return __extends(t,e),t.prototype.setX=function(e){return this._x=e,this.applyTransform()},t.prototype.setY=function(e){return this._y=e,this.applyTransform()},t.prototype.setRotation=function(e){return this._rotation=e,this.applyTransform()},t.prototype.setOrder=function(e){return this._order=e,this.applyTransform()},t.prototype.getHeight=function(){var e;return e=this.getElement().style.height.match(/(\d+)(px)/)||function(){throw"Error getting height at "+this}.call(this),e[2]==="px"||function(){throw"height must be expressed in px"}(),parseInt(e[1],10)},t.prototype.getWidth=function(){var e;return e=this.getElement().style.width.match(/(\d+)(px)/)||function(){throw"Error getting width at "+this}.call(this),e[2]==="px"||function(){throw"width must be expressed in px"}(),parseInt(e[1],10)},t.prototype.applyTransform=function(){var e,t,n,r;if(this._element!==void 0&&this._element!==null){this.getElement().style.zIndex=this._order||0,r=["transform","webkitTransform","mozTransform","oTransform","msTransform"];for(t=0,n=r.length;t<n;t++)e=r[t],this.getElement().style[e]="translate("+parseInt(this._x)+"px,"+parseInt(this._y)+"px) rotate("+parseInt(this._rotation)+"deg)"}},t.prototype.toString=function(){return"[object DOMLink2d]"},t}(n)}),define("links/links",["require","./Link","./DOMLink2d"],function(e){return{Link:e("./Link"),DOMLink2d:e("./DOMLink2d")}});var __hasProp={}.hasOwnProperty,__extends=function(e,t){function r(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};define("layouts/Layout",["require","../events/helpers/EventDispatcher","../events/NodeEvent"],function(e){var t,n,r;return t=e("../events/helpers/EventDispatcher"),r=e("../events/NodeEvent"),n=function(e){function t(){t.__super__.constructor.call(this),this.size=0,this.nodes=[]}return __extends(t,e),t.prototype.addToLayout=function(e,t){throw"Method must be overriden by child class"},t.prototype.addNode=function(e,t){throw"Method must be overriden by child class"},t.prototype.addNodes=function(e){var t,n,r,i;i=[];for(n=0,r=e.length;n<r;n++)t=e[n],i.push(this.addNode(t));return i},t.prototype.toString=function(){return"[object Layout]"},t.prototype.toJSON=function(){var e,t,n,r;for(e=n=0,r=this.size;0<=r?n<r:n>r;e=0<=r?++n:--n)t=this.nodes[e].toObject();return{type:this.toString(),size:this.size,nodes:t}},t.prototype.getNodeByLink=function(e){var t,n,r,i;i=this.nodes;for(n=0,r=i.length;n<r;n++){t=i[n];if(t.getLink()===e)return t}return null},t.prototype.getNodeIndex=function(e){return this.nodes.indexOf(e)},t.prototype.getNodeAt=function(e){return this.nodes[e]},t.prototype.linkExists=function(e){var t,n,r,i;i=this.nodes;for(n=0,r=i.length;n<r;n++){t=i[n];if(e===t.getLink())return!0}return!1},t.prototype.swapNodeLinks=function(e,t){var n;n=e.getLink(),e.setLink(t.getLink()),t.setLink(n)},t.prototype.removeLinks=function(){var e,t,n,r;r=this.nodes;for(t=0,n=r.length;t<n;t++)e=r[t],e.setLink(null)},t.prototype.removeLinkAt=function(e){return this.nodes[e].setLink(null)},t.prototype.removeNode=function(e){var t;return t=this.nodes.splice(this.getNodeIndex(e),1)[0],this.dispatchEvent(new r(r.prototype.REMOVE,t)),--this.size},t.prototype.removeAllNodes=function(){return this.nodes=[],this.size=0},t.prototype.removeNodeByLink=function(e){var t,n,r,i;i=this.nodes;for(n=0,r=i.length;n<r;n++){t=i[n];if(t.getLink()===e){this.removeNode(t);return}}},t.prototype.addLinkAt=function(e,t){return this.nodes[t].setLink(e)},t.prototype.storeNode=function(e){return this.nodes||(this.nodes=[]),this.nodes.push(e),++this.size},t.prototype.storeNodeAt=function(e,t){return this.nodes||(this.nodes=[]),this.nodes.splice(t,0,e),++this.size},t.prototype.getNextAvailableNode=function(){var e,t,n,r;r=this.nodes;for(t=0,n=r.length;t<n;t++){e=r[t];if(e.getLink()!==null)return e}},t}(t)}),define("constants/LayoutUpdateMethod",["require"],function(e){return{NONE:"none",UPDATE_ONLY:"updateOnly",UPDATE_AND_RENDER:"updateAndRender"}});var __hasProp={}.hasOwnProperty,__extends=function(e,t){function r(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};define("layouts/twodee/Layout2d",["require","../Layout","../../constants/LayoutUpdateMethod","../../nodes/twodee/Node2d","../../events/NodeEvent"],function(e){var t,n,r,i,s;return t=e("../Layout"),r=e("../../constants/LayoutUpdateMethod"),i=e("../../nodes/twodee/Node2d"),s=e("../../events/NodeEvent"),n=function(e){function n(e,t,i,s,o,u,a){e==null&&(e=0),t==null&&(t=0),i==null&&(i=0),s==null&&(s=0),o==null&&(o=0),u==null&&(u=0),a==null&&(a=0),n.__super__.constructor.call(this),this.setUpdateMethod(r.UPDATE_AND_RENDER),this.initConfig({x:e,y:t,width:o,height:u,rotation:a,jitterX:i,jitterY:s},function(){return this.updateFunction()})}var t;return __extends(n,e),n.prototype.getUpdateMethod=function(){return this._updateMethod},n.prototype.setUpdateMethod=function(e){this._updateMethod=e;switch(e){case r.NONE:return this.updateFunction=function(){};case r.UPDATE_ONLY:return this.updateFunction=this.update;default:return this.updateFunction=this.updateAndRender}},n.prototype.getProxyUpdater=function(){return this._proxyUpdater},t=function(e){return this.setUpdateMethod(e.name),this.updateFunction=e.update,this._proxyUpdater=e},n.prototype.addNode=function(e,t){var n;t==null&&(t=!0);if(!this.linkExists(e))return n=new i(e,0,0,this._getRand(),this._getRand()),this.storeNode(n),this.update(),t&&this.render(),this.dispatchEvent(new s(s.prototype.ADD,n)),n},n.prototype.addToLayout=function(e,t){throw"Method must be overriden by child class"},n.prototype.removeNode=function(e){n.__super__.removeNode.apply(this,arguments).removeNode(e),this.updateFunction(),this.dispatchEvent(new CoordyNodeEvent(CoordyNodeEvent.prototype.REMOVE,e))},n.prototype.executeUpdateMethod=function(){return this.updateFunction()},n.prototype.update=function(){},n.prototype.render=function(){var e,t,n,r;r=this.nodes;for(t=0,n=r.length;t<n;t++)e=r[t],e.getLink()!==null&&this.renderNode(e)},n.prototype.updateAndRender=function(){return this.update(),this.render()},n.prototype.clone=function(){throw"Method must be overriden by child class"},n.prototype.renderNode=function(e){return e.getLink().setX(e.getX()),e.getLink().setY(e.getY())},n.prototype.validateObject=function(e){return!0},n.prototype.toString=function(){return"[object Layout2d]"},n.prototype._getRand=function(){return(Math.random()>.5?1:-1)*Math.random()},n}(t)});var __hasProp={}.hasOwnProperty,__extends=function(e,t){function r(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};define("layouts/twodee/VerticalLine",["require","./Layout2d","../../nodes/twodee/OrderedNode","../../events/NodeEvent"],function(e){var t,n,r,i;return t=e("./Layout2d"),r=e("../../nodes/twodee/OrderedNode"),n=e("../../events/NodeEvent"),i=function(e){function t(e,n,r,i,s){e==null&&(e=0),n==null&&(n=0),r==null&&(r=0),i==null&&(i=0),s==null&&(s=0),t.__super__.constructor.call(this,n,r,i,s),this.initConfig({vPadding:e,order:null},function(){return this.updateFunction})}return __extends(t,e),t.prototype.toString=function(){return"[layout VerticalLine]"},t.prototype.addNode=function(e,t){var i;e==null&&(e=null),t==null&&(t=!0);if(this.linkExists(e))return;return i=new r(e,this.size),this.storeNode(i),this.update(),t&&this.render(),this.dispatchEvent(new n(n.prototype.ADD,i)),i},t.prototype.clone=function(){return new t(this.getVPadding(),this.getX(),this.getY(),this.getJitterX(),this.getJitterY())},t.prototype.update=function(){var e,t,n,r,i,s;if(this.size!==0){this.nodes.sort(this.sortOnOrder),t=0,i=this.nodes,s=[];for(n=0,r=i.length;n<r;n++)e=i[n],e.setY(t+this.getY()+e.getJitterY()*this.getJitterY()),e.setX(this.getX()+e.getJitterX()*this.getJitterX()),e.getLink()!==null?s.push(t+=e.getLink().getHeight()+this.getVPadding()):s.push(void 0);return s}},t.prototype.cleanOrder=function(){var e,t,n,r,i;i=this.nodes;for(e=n=0,r=i.length;n<r;e=++n)t=i[e],t.setOrder(e)},t.prototype.sortOnOrder=function(e,t){return e.getOrder()>t.getOrder()},t}(t)});var __hasProp={}.hasOwnProperty,__extends=function(e,t){function r(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};define("layouts/twodee/HorizontalLine",["require","./Layout2d","../../events/NodeEvent","../../nodes/twodee/OrderedNode"],function(e){var t,n,r,i;return n=e("./Layout2d"),r=e("../../events/NodeEvent"),i=e("../../nodes/twodee/OrderedNode"),t=function(e){function t(e,n,r,i,s){e==null&&(e=0),n==null&&(n=0),r==null&&(r=0),i==null&&(i=0),s==null&&(s=0),t.__super__.constructor.call(this,n,r,i,s),this.initConfig({hPadding:e},function(){return this.updateFunction()})}return __extends(t,e),t.prototype.toString=function(){return"[object HorizontalLine]"},t.prototype.addNode=function(e,t){var n;e==null&&(e=null),t==null&&(t=!0);if(this.linkExists(e))return;return n=new i(e,this.size),this.storeNode(n),this.cleanOrder(),this.update(),t&&e&&this.render(),this.dispatchEvent(new r(r.prototype.ADD,n)),n},t.prototype.addToLayoutAt=function(e,t,n){var s;n==null&&(n=!0);if(this.linkExists(e))return;return this.nodes||(this.nodes=[]),s=new i(e,t,0,0),this.storeNodeAt(s,t),this.cleanOrder(),this.update(),n&&render(),this.dispatchEvent(new r(r.prototype.ADD,s)),s},t.prototype.clone=function(){return new t(this.getHPadding(),this.getX(),this.getY(),this.getJitterX(),this.getJitterY())},t.prototype.update=function(){var e,t,n,r,i,s;if(!(this.size<=0)){this.nodes.sort(function(e,t){return e.getOrder()>t.getOrder()}),t=0,i=this.nodes,s=[];for(n=0,r=i.length;n<r;n++)e=i[n],e.setX(t+this.getX()+e.getJitterX()*this.getJitterX()),e.setY(this.getY()),s.push(t+=e.getLink().getWidth()+this.getHPadding());return s}},t.prototype.cleanOrder=function(){var e,t,n,r;this.nodes.sort(function(e,t){return e.getOrder()>t.getOrder()}),r=[];for(e=t=0,n=this.size;0<=n?t<n:t>n;e=0<=n?++t:--t)r.push(this.nodes[e].setOrder(e));return r},t}(n)});var __hasProp={}.hasOwnProperty,__extends=function(e,t){function r(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};define("nodes/twodee/EllipseNode",["require","./Node2d"],function(e){var t,n;return n=e("./Node2d"),t=function(e){function t(e,n,r,i,s,o){e==null&&(e=null),n==null&&(n=0),r==null&&(r=0),i==null&&(i=0),s==null&&(s=0),o==null&&(o=0),this.initConfig({rotation:i}),t.__super__.constructor.call(this,e,n,r,s,o)}return __extends(t,e),t.prototype.clone=function(){return new t(this.getLink(),this.getX(),this.getY(),this.getRotation(),this.getJitterX(),this.getJitterY())},t}(n)}),define("constants/PathAlignType",{ALIGN_PARALLEL:"alignParallel",ALIGN_PERPENDICULAR:"alignPerpendicular",NONE:"noAlign"});var __hasProp={}.hasOwnProperty,__extends=function(e,t){function r(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};define("layouts/twodee/Ellipse",["require","./Layout2d","../../nodes/twodee/EllipseNode","../../events/NodeEvent","../../constants/PathAlignType"],function(e){var t,n,r,i,s;return r=e("./Layout2d"),t=e("../../nodes/twodee/EllipseNode"),i=e("../../events/NodeEvent"),s=e("../../constants/PathAlignType"),n=function(e){function n(e,t,r,i,o,u,a,f,l){r==null&&(r=0),i==null&&(i=0),o==null&&(o=0),u==null&&(u=0),a==null&&(a=0),f==null&&(f=s.NONE),l==null&&(l=0),n.__super__.constructor.call(this,r,i,u,a,e,t,o),this.initConfig({alignType:f,alignAngleOffset:l},function(){return this.updateFunction()})}return __extends(n,e),n.prototype.toString=function(){return"[object Ellipse]"},n.prototype.addNode=function(e,n){var r;n==null&&(n=!0);if(this.linkExists(e))return;return r=new t(e,0,0,0,0,0),this.storeNode(r),this.update(),n&&this.render(),this.dispatchEvent(new i(i.prototype.ADD,r)),r},n.prototype.renderNode=function(e){return n.__super__.renderNode.call(this,e),e.getLink().setRotation(this.getAlignType()===s.NONE?0:e.getRotation())},n.prototype.clone=function(){return new n(this.getWidth(),this.getHeight(),this.getX(),this.getY(),this.getRotation(),this.getJitterX(),this.getJitterY(),this.getAlignType(),this.getAlignAngleOffset())},n.prototype.update=function(){var e,t,n,r,i,o,u,a,f,l,c;if(!(this.nodes.length<=0)){e=Math.PI,u=this.getWidth()/2,t=this.getHeight()/2,i=this.getRotation()*(e/180),l=this.nodes,c=[];for(n=a=0,f=l.length;a<f;n=++a)r=l[n],o=e*n/(this.size/2)+i,r.setX(u*Math.cos(o)+(u+this.getX())+r.getJitterX()*this.getJitterX()-u),r.setY(t*Math.sin(o)+(t+this.getY())+r.getJitterY()*this.getJitterY()-t),r.setRotation(Math.atan2(this.getY()-r.getY(),this.getX()-r.getX())*(180/e)),this.getAlignType()===s.ALIGN_PERPENDICULAR&&r.setRotation(r.getRotation()+90),c.push(r.setRotation(r.getRotation()+this.getAlignAngleOffset()));return c}},n}(r)}),define("constants/WaveFunction",{SINE:"sineFunction",COSINE:"cosineFunction",TAN:"tanFunction",ARCSINE:"arcsineFunction",ARCCOSINE:"arccosineFunction",ARCTAN:"arctanFunction"});var __hasProp={}.hasOwnProperty,__extends=function(e,t){function r(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};define("layouts/twodee/Wave",["require","../../events/NodeEvent","../../constants/PathAlignType","../../constants/WaveFunction","./Layout2d"],function(e){var t,n,r,i,s;return n=e("../../events/NodeEvent"),r=e("../../constants/PathAlignType"),s=e("../../constants/WaveFunction"),t=e("./Layout2d"),i=function(e){function n(e,t,i,o,u,a,f,l,c,h){i==null&&(i=0),o==null&&(o=0),u==null&&(u=1),a==null&&(a=s.SINE),f==null&&(f=0),l==null&&(l=0),c==null&&(c=r.ALIGN_PERPENDICULAR),h==null&&(h=0),n.__super__.constructor.call(this,i,o,f,l,e,t),this.initConfig({frequency:u,waveFunction:a,alignType:c,alignOffset:h},function(){return this.updateFunction()}),this._heightMultiplier=0,this._thetaOffset=0}var t;return __extends(n,e),t=Math.PI,n.prototype.setWaveFunction=function(e){this._wavefunction=e||s.SINE;switch(this._wavefunction){case s.SINE:return this._function=Math.sin;case s.COSINE:return this._function=Math.cos;case s.TAN:return this._function=Math.tan;case s.ARCSINE:return this._function=Math.asin;case s.ARCOSINE:return this._function=Math.acos;case s.ARCTAN:return this._function=Math.atan;default:return this._function=Math.sin}},n.prototype.getWaveFunction=function(){return this._wavefunction},n.prototype.getAlignType=function(){return this._alignType},n.prototype.getAlignOffset=function(){return this._alignOffset},n.prototype.toString=function(){return"[object Wave]"},n.prototype.clone=function(){return new n(this.getWidth(),this.getHeight(),this.getX(),this.getY(),this.getFrequency(),this.getWaveFunction(),this.getJitterX(),this.getJitterY(),this.getAlignType(),this.getAlignOffset())},n.prototype.render=function(){var e,t,n,r,i;r=this.nodes,i=[];for(t=0,n=r.length;t<n;t++)e=r[t],e.getLink()!==null?i.push(this.renderNode(e)):i.push(void 0);return i},n.prototype.renderNode=function(e){return n.__super__.renderNode.call(this,e),e.getLink().setRotation(this.getAlignType()===r.NONE?0:e.getRotation())},n.prototype.update=function(){var e,n,i,s,o,u,a,f;i=this.nodes.length;if(!(i<=0)){a=this.nodes,f=[];for(e=o=0,u=a.length;o<u;e=++o)s=a[e],s.setX(e*(this.getWidth()/i)+this.getX()+s.getJitterX()*this.getJitterX()),n=this._y+s._jitterY*this._jitterY,s.setY(this._function(t*(e+1)/(i/2)*this._frequency-this._thetaOffset*t/180)*((this._height+this._heightMultiplier*e)/2)+n),this._function===Math.sin?s.setRotation(Math.cos(t*(e+1)/(i/2)*this._frequency)*180/t):this._function===Math.cos?s.setRotation(Math.sin(t*(e+1)/(i/2)*this.frequency)*180/t):s.setRotation(0),this._alignType===r.ALIGN_PERPENDICULAR&&s.setRotation(s.getRotation()+90),f.push(s.setRotation(s.getRotation()+this._alignOffset));return f}},n}(t)}),define("constants/StackOrder",{ASCENDING:"stackAscending",DESCENDING:"stackDescending"});var __hasProp={}.hasOwnProperty,__extends=function(e,t){function r(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};define("layouts/twodee/Stack",["require","./Layout2d","../../constants/StackOrder","../../nodes/twodee/OrderedNode","../../events/NodeEvent"],function(e){var t,n,r,i,s;return t=e("./Layout2d"),s=e("../../constants/StackOrder"),r=e("../../nodes/twodee/OrderedNode"),n=e("../../events/NodeEvent"),i=function(e){function t(e,n,r,i,o,u,a){e==null&&(e=45),n==null&&(n=5),r==null&&(r=0),i==null&&(i=0),o==null&&(o=s.ASCENDING),u==null&&(u=0),a==null&&(a=0),t.__super__.constructor.call(this,r,i,u,a),this.initConfig({angle:e,offset:n,order:o},function(){return this.updateFunction})}return __extends(t,e),t.prototype.toString=function(){return"[object Stack]"},t.prototype.addNode=function(e,t){var i;t==null&&(t=!0);if(this.linkExists(e))return;return i=new r(e,this.nodes.length-1),this.storeNode(i),this.cleanOrder(),this.update(),t&&this.render(),this.dispatchEvent(new n(n.prototype.ADD,i)),i},t.prototype.clone=function(){return new t(this._angle,this._offset,this._x,this._y,this._order,this._jitterX,this._jitterY)},t.prototype.renderNode=function(e){t.__super__.renderNode.call(this,e),e.getLink().setOrder(e.getOrder())},t.prototype.update=function(){var e,t,n,r,i;if(!(this.nodes.length<=0)){this.cleanOrder(),n=this._angle*Math.PI/180,this._order===s.ASCENDING?this.nodes.sort(function(e,t){return e.getOrder()-t.getOrder()}):this.nodes.sort(function(e,t){return t.getOrder()-e.getOrder()});for(e=r=0,i=this.nodes.length;0<=i?r<i:r>i;e=0<=i?++r:--r)t=this.nodes[e],t.setX(this._x+Math.cos(n)*this._offset*e+t.getJitterX()*this._jitterX),t.setY(this._y+Math.sin(n)*this._offset*e+t.getJitterY()*this._jitterY)}},t.prototype.cleanOrder=function(){var e,t,n,r,i;i=this.nodes;for(e=n=0,r=i.length;n<r;e=++n)t=i[e],this.nodes[e].setOrder(e)},t}(t)});var __hasProp={}.hasOwnProperty,__extends=function(e,t){function r(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};define("layouts/twodee/Spiral",["require","./Layout2d","../../constants/PathAlignType","../../events/NodeEvent"],function(e){var t,n,r,i;return t=e("./Layout2d"),r=e("../../constants/PathAlignType"),n=e("../../events/NodeEvent"),i=function(e){function n(e,t,i,s,o,u,a,f,l,c){t==null&&(t=0),i==null&&(i=0),s==null&&(s=.15),o==null&&(o=30),u==null&&(u=0),a==null&&(a=0),f==null&&(f=0),l==null&&(l=r.NONE),c==null&&(c=0),n.__super__.constructor.call(this,t,i,a,f),this.initConfig({circumference:e,spiralConstant:s,alignType:l,alignOffset:c,angleDelta:o},function(){return this.userFunction})}var t;return __extends(n,e),t=Math.PI,n.prototype.toString=function(){return"[object Spiral]"},n.prototype.renderNode=function(e){return n.__super__.renderNode.call(this,e),e.getLink().setRotation(this._alignType===r.NONE?0:e.getRotation())},n.prototype.clone=function(){return new n(this._circumference,this._spiralConstant,this._x,this._y,this._angleDelta,this._rotation,this._jitterX,this._jitterY,this._alignType,this._alignOffset)},n.prototype.update=function(){var e,n,i,s,o,u;if(!(this.nodes.length<=0)){u=this.nodes;for(e=s=0,o=u.length;s<o;e=++s)n=u[e],i=this._angleDelta*e*t/180,n.setX(this._x+this._circumference*Math.exp(this._spiralConstant*i)*Math.cos(i)),n.setY(this._y+this._circumference*Math.exp(this._spiralConstant*i)*Math.sin(i)),n.setRotation(Math.atan2(this._y-n.getY(),this._x-n.getX())*(180/t)),this._alignType===r.ALIGN_PERPENDICULAR&&n.setRotation(n.getRotation()+90),n.setRotation(n.getRotation()+this._alignOffset)}},n}(t)}),define("constants/GridLayoutDirection",{LEFT_TO_RIGHT:"leftToRight",RIGHT_TO_LEFT:"rightToLeft",TOP_TO_BOTTOM:"upToDown",BOTTOM_TO_TOP:"downToUp"});var __hasProp={}.hasOwnProperty,__extends=function(e,t){function r(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};define("layouts/twodee/Grid",["require","./Layout2d","../../constants/GridLayoutDirection","../../events/NodeEvent","../../nodes/twodee/GridNode"],function(e){var t,n,r,i,s;return i=e("./Layout2d"),n=e("../../constants/GridLayoutDirection"),s=e("../../events/NodeEvent"),r=e("../../nodes/twodee/GridNode"),t=function(e){function t(e,r,i,s,o,u,a,f,l,c,h,p){o==null&&(o=0),u==null&&(u=0),a==null&&(a=0),f==null&&(f=0),l==null&&(l=n.LEFT_TO_RIGHT),c==null&&(c=n.TOP_TO_BOTTOM),h==null&&(h=0),p==null&&(p=0),t.__super__.constructor.call(this,o,u,h,p,e,r),this.initConfig({columns:i,rows:s,hPadding:a,vPadding:f,hDirection:l,vDirection:c},function(){return this.updateFunction})}return __extends(t,e),t.prototype.setColumns=function(e){return this._columns=e,this._maxNodes=this._columns*this._rows,this.updateFunction()},t.prototype.setRows=function(e){return this._rows=e,this._maxNodes=this._columns*this._rows,this.updateFunction()},t.prototype.addNode=function(e,t){var n,i,o,u;t==null&&(t=!0);if(this.linkExists(e)||this.size>this._maxNodes)return;return i=this.calculateCellSize(),n=this.size%this._columns,u=Math.floor(this.size/(this._maxNodes/this._rows)),o=new r(e,n,u,i.width*n+n*this._hPadding+this._x,i.height*u+u*this._vPadding+this._y),this.storeNode(o),t&&(e.setX(o.getX()),e.setY(o.getY())),this.dispatchEvent(new s(s.prototype.ADD,o)),o},t.prototype.toString=function(){return"[object Grid]"},t.prototype.getColumn=function(e){var t,n,r,i,s,o;s=this.nodes,o=[];for(t=r=0,i=s.length;r<i;t=++r)n=s[t],o.push(this.nodes[t*this._columns+e]);return o},t.prototype.getRow=function(e){var t,n,r,i,s;s=[];for(t=n=r=e*this._columns,i=e*this._columns+this._columns;r<=i?n<i:n>i;t=r<=i?++n:--n)s.push(this.nodes[t]);return s},t.prototype.update=function(){var e,t,r,i,s,o,u,a,f;if(!(this.nodes.length<=0)){o=this._columns*this._rows,t=this.calculateCellSize(),f=this.nodes;for(r=u=0,a=f.length;u<a;r=++u){i=f[r];if(!i)break;e=r%this._columns,s=Math.floor(r/(o/this._rows)),this._hDirection===n.RIGHT_TO_LEFT&&(e=this._columns-1-e),this._vDirection===n.BOTTOM_TO_TOP&&(s=(this._rows-1)(-s)),i.setX=t.width*e+e*this._hPadding+this._x,i.setY=t.height*s+s*this._vPadding+this._y}}},t.prototype.calculateCellSize=function(){return{x:0,y:0,width:(this._width-(this._columns-1)*this._hPadding)/this._columns,height:(this._height-(this._rows-1)*this._vPadding)/this._rows}},t}(i)}),define("layouts/layouts",["require","./Layout","./twodee/Layout2d","./twodee/VerticalLine","./twodee/HorizontalLine","./twodee/Ellipse","./twodee/Wave","./twodee/Stack","./twodee/Spiral","./twodee/Grid"],function(e){return{Layout:e("./Layout"),twodee:{Layout2d:e("./twodee/Layout2d"),VerticalLine:e("./twodee/VerticalLine"),HorizontalLine:e("./twodee/HorizontalLine"),Ellipse:e("./twodee/Ellipse"),Wave:e("./twodee/Wave"),Stack:e("./twodee/Stack"),Spiral:e("./twodee/Spiral"),Grid:e("./twodee/Grid")}}}),define("helpers/helpers",["require"],function(e){}),define("utils/ES5shims",["require"],function(e){var t,n,r,i,s;(i=(n=Array.prototype).indexOf)==null&&(n.indexOf=function(e){var t,n,r,i;for(t=r=0,i=this.length;r<i;t=++r){n=this[t];if(n===e)return t}return-1}),(s=(r=String.prototype).capitalize)==null&&(r.capitalize=function(){var e,t,n,r;return r=this.valueOf().split(" "),e=function(){var e,i,s;s=[];for(e=0,i=r.length;e<i;e++)n=r[e],t=n.slice(0,1),t=t.toUpperCase(),s.push(t+n.slice(1));return s}(),e.join(" ")});if(typeof t===void 0&&t===null)return t={log:function(){}}});var __hasProp={}.hasOwnProperty,__extends=function(e,t){function r(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};define("utils/LayoutTransitioner",["require","./BaseClass"],function(e){var t,n;return t=e("./BaseClass"),n=function(e){function t(e,t){this.initConfig({tweenFunction:e,layout:t})}return __extends(t,e),t.prototype.syncNodesTo=function(e){var t,n,r,i,s;e==null&&(e=null),e&&this.setLayout(e);if(this.getTweenFunction()===null)return this.getLayout().updateAndRender();i=this.getLayout().nodes,s=[];for(n=0,r=i.length;n<r;n++)t=i[n],s.push(this.getTweenFunction()(t));return s},t}(t)}),define("utils/utils",["require","./ES5shims","./BaseClass","./LayoutTransitioner"],function(e){return{ES5shims:e("./ES5shims"),BaseClass:e("./BaseClass"),LayoutTransitioner:e("./LayoutTransitioner")}}),define("constants/constants",["require","./LayoutUpdateMethod","./PathAlignType","./WaveFunction","./StackOrder","./GridLayoutDirection"],function(e){return{LayoutUpdateMethod:e("./LayoutUpdateMethod"),PathAlignType:e("./PathAlignType"),WaveFunction:e("./WaveFunction"),StackOrder:e("./StackOrder"),GridLayoutDirection:e("./GridLayoutDirection")}}),define("Coordinates",["require","./events/events","./nodes/nodes","./links/links","./layouts/layouts","./helpers/helpers","./utils/utils","./constants/constants"],function(e){var t;return t={events:e("./events/events"),nodes:e("./nodes/nodes"),links:e("./links/links"),layouts:e("./layouts/layouts"),helpers:e("./helpers/helpers"),utils:e("./utils/utils"),constants:e("./constants/constants")},t.DOMLink2d=t.links.DOMLink2d,t.Link=t.links.Link,t.Node=t.nodes.Node,t.Node2d=t.nodes.twodee.Node2d,t.Layout=t.layouts.Layout,t.Layout2d=t.layouts.twodee.Layout2d,t.VerticalLine=t.layouts.twodee.VerticalLine,t.HorizontalLine=t.layouts.twodee.HorizontalLine,t.Ellipse=t.layouts.twodee.Ellipse,t.BaseClass=t.utils.BaseClass,t.NodeEvent=t.events.NodeEvent,t.Wave=t.layouts.twodee.Wave,t.Stack=t.layouts.twodee.Stack,t.Spiral=t.layouts.twodee.Spiral,t.Grid=t.layouts.twodee.Grid,t.LayoutTransitioner=t.utils.LayoutTransitioner,t.LayoutUpdateMethod=t.constants.LayoutUpdateMethod,t.StackOrder=t.constants.StackOrder,t})